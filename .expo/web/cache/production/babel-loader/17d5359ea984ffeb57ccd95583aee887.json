{"ast":null,"code":"\"use strict\";var _regeneratorRuntime=require(\"/Users/fernandorojo/Developer/messing/rea-tree/node_modules/next/dist/compiled/@babel/runtime/regenerator\");var _asyncToGenerator=require(\"/Users/fernandorojo/Developer/messing/rea-tree/node_modules/next/dist/compiled/@babel/runtime/helpers/asyncToGenerator\");Object.defineProperty(exports,\"__esModule\",{value:true});exports.assignStylesValue=assignStylesValue;exports.getAppThemeLightNoActionBarGroup=getAppThemeLightNoActionBarGroup;exports.getProjectStylesXMLPathAsync=getProjectStylesXMLPathAsync;exports.getStyleParent=getStyleParent;exports.getStylesGroupAsObject=getStylesGroupAsObject;exports.getStylesItem=getStylesItem;exports.readStylesXMLAsync=readStylesXMLAsync;exports.removeStylesItem=removeStylesItem;exports.setStylesItem=setStylesItem;function _Paths(){var data=require(\"./Paths\");_Paths=function _Paths(){return data;};return data;}function _Resources(){var data=require(\"./Resources\");_Resources=function _Resources(){return data;};return data;}// Adds support for `tools:x`\nvar fallbackResourceString=\"<?xml version=\\\"1.0\\\" encoding=\\\"utf-8\\\"?><resources xmlns:tools=\\\"http://schemas.android.com/tools\\\"></resources>\";function readStylesXMLAsync(_x){return _readStylesXMLAsync.apply(this,arguments);}function _readStylesXMLAsync(){_readStylesXMLAsync=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(_ref){var path,_ref$fallback,fallback;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:path=_ref.path,_ref$fallback=_ref.fallback,fallback=_ref$fallback===void 0?fallbackResourceString:_ref$fallback;return _context.abrupt(\"return\",(0,_Resources().readResourcesXMLAsync)({path:path,fallback:fallback}));case 2:case\"end\":return _context.stop();}}},_callee);}));return _readStylesXMLAsync.apply(this,arguments);}function getProjectStylesXMLPathAsync(_x2){return _getProjectStylesXMLPathAsync.apply(this,arguments);}function _getProjectStylesXMLPathAsync(){_getProjectStylesXMLPathAsync=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(projectRoot){var _ref9,kind,_args2=arguments;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_ref9=_args2.length>1&&_args2[1]!==undefined?_args2[1]:{},kind=_ref9.kind;return _context2.abrupt(\"return\",(0,_Paths().getResourceXMLPathAsync)(projectRoot,{kind:kind,name:'styles'}));case 2:case\"end\":return _context2.stop();}}},_callee2);}));return _getProjectStylesXMLPathAsync.apply(this,arguments);}function ensureDefaultStyleResourceXML(xml){var _xml,_xml$resources;xml=(0,_Resources().ensureDefaultResourceXML)(xml);if(!Array.isArray((_xml=xml)===null||_xml===void 0?void 0:(_xml$resources=_xml.resources)===null||_xml$resources===void 0?void 0:_xml$resources.style)){xml.resources.style=[];}return xml;}function getStyleParent(xml,group){return(0,_Resources().findResourceGroup)(xml.resources.style,group);}function getStylesItem(_ref2){var name=_ref2.name,xml=_ref2.xml,parent=_ref2.parent;xml=ensureDefaultStyleResourceXML(xml);var appTheme=getStyleParent(xml,parent);if(!appTheme){return null;}if(appTheme.item){var existingItem=appTheme.item.filter(function(_ref3){var head=_ref3.$;return head.name===name;})[0];// Don't want to 2 of the same item, so if one exists, we overwrite it\nif(existingItem){return existingItem;}}return null;}function setStylesItem(_ref4){var item=_ref4.item,xml=_ref4.xml,parent=_ref4.parent;xml=ensureDefaultStyleResourceXML(xml);var appTheme=getStyleParent(xml,parent);if(!appTheme){appTheme=(0,_Resources().buildResourceGroup)(parent);xml.resources.style.push(appTheme);}if(appTheme.item){var existingItem=appTheme.item.filter(function(_ref5){var head=_ref5.$;return head.name===item.$.name;})[0];// Don't want to 2 of the same item, so if one exists, we overwrite it\nif(existingItem){existingItem._=item._;existingItem.$=item.$;}else{appTheme.item.push(item);}}else{appTheme.item=[item];}return xml;}function removeStylesItem(_ref6){var name=_ref6.name,xml=_ref6.xml,parent=_ref6.parent;xml=ensureDefaultStyleResourceXML(xml);var appTheme=getStyleParent(xml,parent);if(appTheme!==null&&appTheme!==void 0&&appTheme.item){var index=appTheme.item.findIndex(function(_ref7){var head=_ref7.$;return head.name===name;});if(index>-1){appTheme.item.splice(index,1);}}return xml;}// This is a very common theme so make it reusable.\nfunction getAppThemeLightNoActionBarGroup(){return{name:'AppTheme',parent:'Theme.AppCompat.Light.NoActionBar'};}function assignStylesValue(xml,_ref8){var add=_ref8.add,value=_ref8.value,targetApi=_ref8.targetApi,name=_ref8.name,parent=_ref8.parent;if(add){return setStylesItem({xml:xml,parent:parent,item:(0,_Resources().buildResourceItem)({name:name,targetApi:targetApi,value:value})});}return removeStylesItem({xml:xml,parent:parent,name:name});}/**\n * Helper to convert a styles.xml parent's children into a simple k/v pair.\n * Added for testing purposes.\n *\n * @param xml\n * @returns\n */function getStylesGroupAsObject(xml,group){var xmlGroup=getStyleParent(xml,group);return xmlGroup!==null&&xmlGroup!==void 0&&xmlGroup.item?(0,_Resources().getResourceItemsAsObject)(xmlGroup.item):null;}","map":{"version":3,"sources":["../../src/android/Styles.ts"],"names":["fallbackResourceString","fallback","path","kind","name","xml","Array","parent","ensureDefaultStyleResourceXML","appTheme","getStyleParent","existingItem","$","head","item","index","setStylesItem","targetApi","value","removeStylesItem","xmlGroup"],"mappings":"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","sourcesContent":["import { getResourceXMLPathAsync } from './Paths';\nimport {\n  buildResourceGroup,\n  buildResourceItem,\n  ensureDefaultResourceXML,\n  findResourceGroup,\n  getResourceItemsAsObject,\n  readResourcesXMLAsync,\n  ResourceGroupXML,\n  ResourceItemXML,\n  ResourceKind,\n  ResourceXML,\n} from './Resources';\n\n// Adds support for `tools:x`\nconst fallbackResourceString = `<?xml version=\"1.0\" encoding=\"utf-8\"?><resources xmlns:tools=\"http://schemas.android.com/tools\"></resources>`;\n\nexport async function readStylesXMLAsync({\n  path,\n  fallback = fallbackResourceString,\n}: {\n  path: string;\n  fallback?: string | null;\n}): Promise<ResourceXML> {\n  return readResourcesXMLAsync({ path, fallback });\n}\n\nexport async function getProjectStylesXMLPathAsync(\n  projectRoot: string,\n  { kind }: { kind?: ResourceKind } = {}\n): Promise<string> {\n  return getResourceXMLPathAsync(projectRoot, { kind, name: 'styles' });\n}\n\nfunction ensureDefaultStyleResourceXML(xml: ResourceXML): ResourceXML {\n  xml = ensureDefaultResourceXML(xml);\n  if (!Array.isArray(xml?.resources?.style)) {\n    xml.resources.style = [];\n  }\n  return xml;\n}\n\nexport function getStyleParent(\n  xml: ResourceXML,\n  group: { name: string; parent?: string }\n): ResourceGroupXML | null {\n  return findResourceGroup(xml.resources.style, group);\n}\n\nexport function getStylesItem({\n  name,\n  xml,\n  parent,\n}: {\n  name: string;\n  xml: ResourceXML;\n  parent: { name: string; parent?: string };\n}): ResourceItemXML | null {\n  xml = ensureDefaultStyleResourceXML(xml);\n\n  const appTheme = getStyleParent(xml, parent);\n\n  if (!appTheme) {\n    return null;\n  }\n\n  if (appTheme.item) {\n    const existingItem = appTheme.item.filter(({ $: head }) => head.name === name)[0];\n\n    // Don't want to 2 of the same item, so if one exists, we overwrite it\n    if (existingItem) {\n      return existingItem;\n    }\n  }\n  return null;\n}\n\nexport function setStylesItem({\n  item,\n  xml,\n  parent,\n}: {\n  item: ResourceItemXML;\n  xml: ResourceXML;\n  parent: { name: string; parent: string };\n}): ResourceXML {\n  xml = ensureDefaultStyleResourceXML(xml);\n\n  let appTheme = getStyleParent(xml, parent);\n\n  if (!appTheme) {\n    appTheme = buildResourceGroup(parent);\n    xml.resources!.style!.push(appTheme);\n  }\n\n  if (appTheme.item) {\n    const existingItem = appTheme.item.filter(({ $: head }) => head.name === item.$.name)[0];\n\n    // Don't want to 2 of the same item, so if one exists, we overwrite it\n    if (existingItem) {\n      existingItem._ = item._;\n      existingItem.$ = item.$;\n    } else {\n      appTheme.item.push(item);\n    }\n  } else {\n    appTheme.item = [item];\n  }\n  return xml;\n}\n\nexport function removeStylesItem({\n  name,\n  xml,\n  parent,\n}: {\n  name: string;\n  xml: ResourceXML;\n  parent: { name: string; parent: string };\n}): ResourceXML {\n  xml = ensureDefaultStyleResourceXML(xml);\n  const appTheme = getStyleParent(xml, parent);\n  if (appTheme?.item) {\n    const index = appTheme.item.findIndex(({ $: head }: ResourceItemXML) => head.name === name);\n    if (index > -1) {\n      appTheme.item.splice(index, 1);\n    }\n  }\n  return xml;\n}\n\n// This is a very common theme so make it reusable.\nexport function getAppThemeLightNoActionBarGroup() {\n  return { name: 'AppTheme', parent: 'Theme.AppCompat.Light.NoActionBar' };\n}\n\nexport function assignStylesValue(\n  xml: ResourceXML,\n  {\n    add,\n    value,\n    targetApi,\n    name,\n    parent,\n  }: {\n    add: boolean;\n    value: string;\n    targetApi?: string;\n    name: string;\n    parent: { name: string; parent: string };\n  }\n): ResourceXML {\n  if (add) {\n    return setStylesItem({\n      xml,\n      parent,\n      item: buildResourceItem({\n        name,\n        targetApi,\n        value,\n      }),\n    });\n  }\n  return removeStylesItem({\n    xml,\n    parent,\n    name,\n  });\n}\n\n/**\n * Helper to convert a styles.xml parent's children into a simple k/v pair.\n * Added for testing purposes.\n *\n * @param xml\n * @returns\n */\nexport function getStylesGroupAsObject(\n  xml: ResourceXML,\n  group: { name: string; parent?: string }\n): Record<string, string> | null {\n  const xmlGroup = getStyleParent(xml, group);\n  return xmlGroup?.item ? getResourceItemsAsObject(xmlGroup.item) : null;\n}\n"]},"metadata":{},"sourceType":"script"}