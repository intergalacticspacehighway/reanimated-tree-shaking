{"ast":null,"code":"import _toConsumableArray from\"/Users/fernandorojo/Developer/messing/rea-tree/node_modules/next/dist/compiled/@babel/runtime/helpers/esm/toConsumableArray\";import _classCallCheck from\"/Users/fernandorojo/Developer/messing/rea-tree/node_modules/next/dist/compiled/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/fernandorojo/Developer/messing/rea-tree/node_modules/next/dist/compiled/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/Users/fernandorojo/Developer/messing/rea-tree/node_modules/next/dist/compiled/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Users/fernandorojo/Developer/messing/rea-tree/node_modules/next/dist/compiled/@babel/runtime/helpers/esm/inherits\";import _possibleConstructorReturn from\"/Users/fernandorojo/Developer/messing/rea-tree/node_modules/next/dist/compiled/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/fernandorojo/Developer/messing/rea-tree/node_modules/next/dist/compiled/@babel/runtime/helpers/esm/getPrototypeOf\";function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return _possibleConstructorReturn(this,result);};}function _isNativeReflectConstruct(){if(typeof Reflect===\"undefined\"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy===\"function\")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}import MapperRegistry from'./MapperRegistry';import Mapper from'./Mapper';import MutableValue from'./MutableValue';import{NativeReanimated}from'../NativeReanimated/NativeReanimated';import{isJest}from'../PlatformChecker';var JSReanimated=/*#__PURE__*/function(_NativeReanimated){_inherits(JSReanimated,_NativeReanimated);var _super=_createSuper(JSReanimated);function JSReanimated(){var _this;_classCallCheck(this,JSReanimated);_this=_super.call(this,false);_this._valueSetter=undefined;_this._renderRequested=false;_this._mapperRegistry=new MapperRegistry(_assertThisInitialized(_this));_this._frames=[];if(isJest()){_this.timeProvider={now:function now(){return global.ReanimatedDataMock.now();}};}else{_this.timeProvider={now:function now(){return window.performance.now();}};}return _this;}_createClass(JSReanimated,[{key:\"pushFrame\",value:function pushFrame(frame){this._frames.push(frame);this.maybeRequestRender();}},{key:\"getTimestamp\",value:function getTimestamp(){return this.timeProvider.now();}},{key:\"maybeRequestRender\",value:function maybeRequestRender(){var _this2=this;if(!this._renderRequested){this._renderRequested=true;requestAnimationFrame(function(_timestampMs){_this2._renderRequested=false;_this2._onRender(_this2.getTimestamp());});}}},{key:\"_onRender\",value:function _onRender(timestampMs){this._mapperRegistry.execute();var frames=_toConsumableArray(this._frames);this._frames=[];for(var i=0,len=frames.length;i<len;++i){frames[i](timestampMs);}if(this._mapperRegistry.needRunOnRender){this._mapperRegistry.execute();}}},{key:\"installCoreFunctions\",value:function installCoreFunctions(valueSetter){this._valueSetter=valueSetter;}},{key:\"makeShareable\",value:function makeShareable(value){return value;}},{key:\"makeMutable\",value:function makeMutable(value){// eslint-disable-next-line @typescript-eslint/no-non-null-assertion\nreturn new MutableValue(value,this._valueSetter);}},{key:\"makeRemote\",value:function makeRemote(){var object=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};return object;}},{key:\"startMapper\",value:function startMapper(mapper){var inputs=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[];var outputs=arguments.length>2&&arguments[2]!==undefined?arguments[2]:[];var instance=new Mapper(this,mapper,inputs,outputs);var mapperId=this._mapperRegistry.startMapper(instance);this.maybeRequestRender();return mapperId;}},{key:\"stopMapper\",value:function stopMapper(mapperId){this._mapperRegistry.stopMapper(mapperId);}},{key:\"registerEventHandler\",value:function registerEventHandler(_,__){// noop\nreturn'';}},{key:\"unregisterEventHandler\",value:function unregisterEventHandler(_){// noop\n}},{key:\"enableLayoutAnimations\",value:function enableLayoutAnimations(){console.warn('[Reanimated] enableLayoutAnimations is not available for WEB yet');}},{key:\"registerSensor\",value:function registerSensor(){console.warn('[Reanimated] useAnimatedSensor is not available on web yet.');return-1;}},{key:\"unregisterSensor\",value:function unregisterSensor(){// noop\n}},{key:\"jestResetModule\",value:function jestResetModule(){if(isJest()){/**\n       * If someone used timers to stop animation before the end,\n       * then _renderRequested was set as true\n       * and any new update from another test wasn't applied.\n       */this._renderRequested=false;}else{throw Error('This method can be only use in Jest testing.');}}}]);return JSReanimated;}(NativeReanimated);export{JSReanimated as default};","map":{"version":3,"names":["MapperRegistry","Mapper","MutableValue","NativeReanimated","isJest","JSReanimated","_valueSetter","undefined","_renderRequested","_mapperRegistry","_frames","timeProvider","now","global","ReanimatedDataMock","window","performance","frame","push","maybeRequestRender","requestAnimationFrame","_timestampMs","_onRender","getTimestamp","timestampMs","execute","frames","i","len","length","needRunOnRender","valueSetter","value","object","mapper","inputs","outputs","instance","mapperId","startMapper","stopMapper","_","__","console","warn","Error"],"sources":["/Users/fernandorojo/Developer/messing/rea-tree/node_modules/react-native-reanimated/lib/reanimated2/js-reanimated/JSReanimated.js"],"sourcesContent":["import MapperRegistry from './MapperRegistry';\nimport Mapper from './Mapper';\nimport MutableValue from './MutableValue';\nimport { NativeReanimated } from '../NativeReanimated/NativeReanimated';\nimport { isJest } from '../PlatformChecker';\nexport default class JSReanimated extends NativeReanimated {\n  constructor() {\n    super(false);\n    this._valueSetter = undefined;\n    this._renderRequested = false;\n    this._mapperRegistry = new MapperRegistry(this);\n    this._frames = [];\n\n    if (isJest()) {\n      this.timeProvider = {\n        now: () => global.ReanimatedDataMock.now()\n      };\n    } else {\n      this.timeProvider = {\n        now: () => window.performance.now()\n      };\n    }\n  }\n\n  pushFrame(frame) {\n    this._frames.push(frame);\n\n    this.maybeRequestRender();\n  }\n\n  getTimestamp() {\n    return this.timeProvider.now();\n  }\n\n  maybeRequestRender() {\n    if (!this._renderRequested) {\n      this._renderRequested = true;\n      requestAnimationFrame(_timestampMs => {\n        this._renderRequested = false;\n\n        this._onRender(this.getTimestamp());\n      });\n    }\n  }\n\n  _onRender(timestampMs) {\n    this._mapperRegistry.execute();\n\n    const frames = [...this._frames];\n    this._frames = [];\n\n    for (let i = 0, len = frames.length; i < len; ++i) {\n      frames[i](timestampMs);\n    }\n\n    if (this._mapperRegistry.needRunOnRender) {\n      this._mapperRegistry.execute();\n    }\n  }\n\n  installCoreFunctions(valueSetter) {\n    this._valueSetter = valueSetter;\n  }\n\n  makeShareable(value) {\n    return value;\n  }\n\n  makeMutable(value) {\n    // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n    return new MutableValue(value, this._valueSetter);\n  }\n\n  makeRemote(object = {}) {\n    return object;\n  }\n\n  startMapper(mapper, inputs = [], outputs = []) {\n    const instance = new Mapper(this, mapper, inputs, outputs);\n\n    const mapperId = this._mapperRegistry.startMapper(instance);\n\n    this.maybeRequestRender();\n    return mapperId;\n  }\n\n  stopMapper(mapperId) {\n    this._mapperRegistry.stopMapper(mapperId);\n  }\n\n  registerEventHandler(_, __) {\n    // noop\n    return '';\n  }\n\n  unregisterEventHandler(_) {// noop\n  }\n\n  enableLayoutAnimations() {\n    console.warn('[Reanimated] enableLayoutAnimations is not available for WEB yet');\n  }\n\n  registerSensor() {\n    console.warn('[Reanimated] useAnimatedSensor is not available on web yet.');\n    return -1;\n  }\n\n  unregisterSensor() {// noop\n  }\n\n  jestResetModule() {\n    if (isJest()) {\n      /**\n       * If someone used timers to stop animation before the end,\n       * then _renderRequested was set as true\n       * and any new update from another test wasn't applied.\n       */\n      this._renderRequested = false;\n    } else {\n      throw Error('This method can be only use in Jest testing.');\n    }\n  }\n\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}