{"ast":null,"code":"import _classCallCheck from\"/Users/fernandorojo/Developer/messing/rea-tree/node_modules/next/dist/compiled/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/fernandorojo/Developer/messing/rea-tree/node_modules/next/dist/compiled/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/Users/fernandorojo/Developer/messing/rea-tree/node_modules/next/dist/compiled/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Users/fernandorojo/Developer/messing/rea-tree/node_modules/next/dist/compiled/@babel/runtime/helpers/esm/inherits\";import _possibleConstructorReturn from\"/Users/fernandorojo/Developer/messing/rea-tree/node_modules/next/dist/compiled/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/fernandorojo/Developer/messing/rea-tree/node_modules/next/dist/compiled/@babel/runtime/helpers/esm/getPrototypeOf\";function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return _possibleConstructorReturn(this,result);};}function _isNativeReflectConstruct(){if(typeof Reflect===\"undefined\"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy===\"function\")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true});}else{obj[key]=value;}return obj;}import Platform from\"react-native-web/dist/cjs/exports/Platform\";import findNodeHandle from\"react-native-web/dist/cjs/exports/findNodeHandle\";import ReanimatedModule from'../../ReanimatedModule';import AnimatedNode from'./AnimatedNode';import InternalAnimatedValue from'./AnimatedValue';import{createAnimatedAlways}from'./AnimatedAlways';import invariant from'invariant';import createEventObjectProxyPolyfill from'./createEventObjectProxyPolyfill';function sanitizeArgMapping(argMapping){// Find animated values in `argMapping` and create an array representing their\n// key path inside the `nativeEvent` object. Ex.: ['contentOffset', 'x'].\nvar eventMappings=[];var alwaysNodes=[];var getNode=function getNode(node){if(Platform.OS==='web'||Platform.OS==='windows'||Platform.OS==='macos'){return node;}return node.__nodeID;};var traverse=function traverse(value,path){if(value instanceof InternalAnimatedValue){eventMappings.push(path.concat(getNode(value)));}else if(typeof value==='object'&&value.__val){eventMappings.push(path.concat(getNode(value.__val)));}else if(typeof value==='function'){var node=new InternalAnimatedValue(0);alwaysNodes.push(createAnimatedAlways(value(node)));eventMappings.push(path.concat(getNode(node)));}else if(typeof value==='object'){for(var key in value){traverse(value[key],path.concat(key));}}};invariant(argMapping[0]&&argMapping[0].nativeEvent,'Native driven events only support animated values contained inside `nativeEvent`.');// Assume that the event containing `nativeEvent` is always the first argument.\nvar ev=argMapping[0].nativeEvent;if(typeof ev==='object'){traverse(ev,[]);}else if(typeof ev==='function'){var proxyHandler={get:function get(target,name){if(name==='__isProxy'){return true;}if(!target[name]&&name!=='__val'){target[name]=new Proxy({},proxyHandler);}return target[name];},set:function set(target,prop,value){if(prop==='__val'){target[prop]=value;return true;}return false;}};var proxy=typeof Proxy==='function'?new Proxy({},proxyHandler):createEventObjectProxyPolyfill();alwaysNodes.push(createAnimatedAlways(ev(proxy)));traverse(proxy,[]);}return{eventMappings:eventMappings,alwaysNodes:alwaysNodes};}var AnimatedEvent=/*#__PURE__*/function(_AnimatedNode){_inherits(AnimatedEvent,_AnimatedNode);var _super=_createSuper(AnimatedEvent);function AnimatedEvent(argMapping){var _this;var _config=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};_classCallCheck(this,AnimatedEvent);var _sanitizeArgMapping=sanitizeArgMapping(argMapping),eventMappings=_sanitizeArgMapping.eventMappings,alwaysNodes=_sanitizeArgMapping.alwaysNodes;_this=_super.call(this,{type:'event',argMapping:eventMappings});_defineProperty(_assertThisInitialized(_this),\"__isNative\",true);_this._alwaysNodes=alwaysNodes;return _this;}_createClass(AnimatedEvent,[{key:\"toString\",value:function toString(){return\"AnimatedEvent, id: \".concat(this.__nodeID);}// The below field is a temporary workaround to make AnimatedEvent object be recognized\n// as Animated.event event callback and therefore filtered out from being send over the\n// bridge which was causing the object to be frozen in JS.\n},{key:\"attachEvent\",value:function attachEvent(viewRef,eventName){for(var i=0;i<this._alwaysNodes.length;i++){this._alwaysNodes[i].__attach();}this.__attach();var viewTag=findNodeHandle(viewRef);ReanimatedModule.attachEvent(viewTag,eventName,this.__nodeID);}},{key:\"__onEvaluate\",value:function __onEvaluate(){return 0;}},{key:\"detachEvent\",value:function detachEvent(viewRef,eventName){for(var i=0;i<this._alwaysNodes.length;i++){this._alwaysNodes[i].isNativelyInitialized()&&this._alwaysNodes[i].__detach();}var viewTag=findNodeHandle(viewRef);ReanimatedModule.detachEvent(viewTag,eventName,this.__nodeID);this.__detach();}}]);return AnimatedEvent;}(AnimatedNode);export{AnimatedEvent as default};export function createAnimatedEvent(argMapping,config){return new AnimatedEvent(argMapping,config);}","map":{"version":3,"names":["_defineProperty","obj","key","value","Object","defineProperty","enumerable","configurable","writable","Platform","findNodeHandle","ReanimatedModule","AnimatedNode","InternalAnimatedValue","createAnimatedAlways","invariant","createEventObjectProxyPolyfill","sanitizeArgMapping","argMapping","eventMappings","alwaysNodes","getNode","node","OS","__nodeID","traverse","path","push","concat","__val","nativeEvent","ev","proxyHandler","get","target","name","Proxy","set","prop","proxy","AnimatedEvent","_config","type","_alwaysNodes","viewRef","eventName","i","length","__attach","viewTag","attachEvent","isNativelyInitialized","__detach","detachEvent","createAnimatedEvent","config"],"sources":["/Users/fernandorojo/Developer/messing/rea-tree/node_modules/react-native-reanimated/lib/reanimated1/core/AnimatedEvent.js"],"sourcesContent":["function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport Platform from \"react-native-web/dist/cjs/exports/Platform\";\nimport findNodeHandle from \"react-native-web/dist/cjs/exports/findNodeHandle\";\nimport ReanimatedModule from '../../ReanimatedModule';\nimport AnimatedNode from './AnimatedNode';\nimport InternalAnimatedValue from './AnimatedValue';\nimport { createAnimatedAlways } from './AnimatedAlways';\nimport invariant from 'invariant';\nimport createEventObjectProxyPolyfill from './createEventObjectProxyPolyfill';\n\nfunction sanitizeArgMapping(argMapping) {\n  // Find animated values in `argMapping` and create an array representing their\n  // key path inside the `nativeEvent` object. Ex.: ['contentOffset', 'x'].\n  const eventMappings = [];\n  const alwaysNodes = [];\n\n  const getNode = node => {\n    if (Platform.OS === 'web' || Platform.OS === 'windows' || Platform.OS === 'macos') {\n      return node;\n    }\n\n    return node.__nodeID;\n  };\n\n  const traverse = (value, path) => {\n    if (value instanceof InternalAnimatedValue) {\n      eventMappings.push(path.concat(getNode(value)));\n    } else if (typeof value === 'object' && value.__val) {\n      eventMappings.push(path.concat(getNode(value.__val)));\n    } else if (typeof value === 'function') {\n      const node = new InternalAnimatedValue(0);\n      alwaysNodes.push(createAnimatedAlways(value(node)));\n      eventMappings.push(path.concat(getNode(node)));\n    } else if (typeof value === 'object') {\n      for (const key in value) {\n        traverse(value[key], path.concat(key));\n      }\n    }\n  };\n\n  invariant(argMapping[0] && argMapping[0].nativeEvent, 'Native driven events only support animated values contained inside `nativeEvent`.'); // Assume that the event containing `nativeEvent` is always the first argument.\n\n  const ev = argMapping[0].nativeEvent;\n\n  if (typeof ev === 'object') {\n    traverse(ev, []);\n  } else if (typeof ev === 'function') {\n    const proxyHandler = {\n      get: function (target, name) {\n        if (name === '__isProxy') {\n          return true;\n        }\n\n        if (!target[name] && name !== '__val') {\n          target[name] = new Proxy({}, proxyHandler);\n        }\n\n        return target[name];\n      },\n      set: function (target, prop, value) {\n        if (prop === '__val') {\n          target[prop] = value;\n          return true;\n        }\n\n        return false;\n      }\n    };\n    const proxy = typeof Proxy === 'function' ? new Proxy({}, proxyHandler) : createEventObjectProxyPolyfill();\n    alwaysNodes.push(createAnimatedAlways(ev(proxy)));\n    traverse(proxy, []);\n  }\n\n  return {\n    eventMappings,\n    alwaysNodes\n  };\n}\n\nexport default class AnimatedEvent extends AnimatedNode {\n  constructor(argMapping, _config = {}) {\n    const {\n      eventMappings,\n      alwaysNodes\n    } = sanitizeArgMapping(argMapping);\n    super({\n      type: 'event',\n      argMapping: eventMappings\n    });\n\n    _defineProperty(this, \"__isNative\", true);\n\n    this._alwaysNodes = alwaysNodes;\n  }\n\n  toString() {\n    return `AnimatedEvent, id: ${this.__nodeID}`;\n  } // The below field is a temporary workaround to make AnimatedEvent object be recognized\n  // as Animated.event event callback and therefore filtered out from being send over the\n  // bridge which was causing the object to be frozen in JS.\n\n\n  attachEvent(viewRef, eventName) {\n    for (let i = 0; i < this._alwaysNodes.length; i++) {\n      this._alwaysNodes[i].__attach();\n    }\n\n    this.__attach();\n\n    const viewTag = findNodeHandle(viewRef);\n    ReanimatedModule.attachEvent(viewTag, eventName, this.__nodeID);\n  }\n\n  __onEvaluate() {\n    return 0;\n  }\n\n  detachEvent(viewRef, eventName) {\n    for (let i = 0; i < this._alwaysNodes.length; i++) {\n      this._alwaysNodes[i].isNativelyInitialized() && this._alwaysNodes[i].__detach();\n    }\n\n    const viewTag = findNodeHandle(viewRef);\n    ReanimatedModule.detachEvent(viewTag, eventName, this.__nodeID);\n\n    this.__detach();\n  }\n\n}\nexport function createAnimatedEvent(argMapping, config) {\n  return new AnimatedEvent(argMapping, config);\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}