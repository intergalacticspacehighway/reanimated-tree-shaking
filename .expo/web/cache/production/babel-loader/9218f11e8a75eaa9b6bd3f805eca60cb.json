{"ast":null,"code":"import{always,block,call,clockRunning,cond,set,startClock,stopClock}from'../base';import Clock from'../core/AnimatedClock';import{evaluateOnce}from'../derived/evaluateOnce';function createOldAnimationObject(node,animationStateDefaults,value,config){var newClock=new Clock();var currentState=animationStateDefaults();var alwaysNode;var isStarted=false;var isDone=false;var wasStopped=false;var animationCallback;var animation={start:function start(currentAnimationCallback){animationCallback=currentAnimationCallback;if(isStarted){animationCallback&&animationCallback({finished:false});return;}if(isDone){console.warn('Animation has been finished before');// inconsistent with React Native\nreturn;}if(!value.isNativelyInitialized()){return;}isStarted=true;evaluateOnce(set(currentState.position,value),currentState.position,function(){alwaysNode=always(set(value,block([cond(clockRunning(newClock),0,startClock(newClock)),node(newClock,currentState,config),cond(currentState.finished,[call([],function(){isStarted=false;if(!wasStopped){isDone=true;}value.__detachAnimation(animation);isDone=true;if(!wasStopped){wasStopped=false;}}),stopClock(newClock)]),currentState.position])));value.__attachAnimation(animation);alwaysNode.__addChild(value);});},__detach:function __detach(){animationCallback&&animationCallback({finished:isDone});animationCallback=null;value.__initialized&&alwaysNode.__removeChild(value);},stop:function stop(){if(isDone){console.warn('Calling stop has no effect as the animation has already completed');return;}if(!isStarted){console.warn(\"Calling stop has no effect as the animation hasn't been started\");return;}wasStopped=true;evaluateOnce(set(currentState.finished,1),currentState.finished);},__stopImmediately_testOnly:function __stopImmediately_testOnly(result){animation.stop();isDone=result;value.__detachAnimation(animation);}};return animation;}/**\n * Depending on the arguments list we either return animation node or return an\n * animation object that is compatible with the original Animated API\n */export default function backwardsCompatibleAnimWrapper(node,animationStateDefaults){return function(clock,state,config){if(config!==undefined){return node(clock,state,config);}return createOldAnimationObject(node,animationStateDefaults,clock,state);};}","map":{"version":3,"names":["always","block","call","clockRunning","cond","set","startClock","stopClock","Clock","evaluateOnce","createOldAnimationObject","node","animationStateDefaults","value","config","newClock","currentState","alwaysNode","isStarted","isDone","wasStopped","animationCallback","animation","start","currentAnimationCallback","finished","console","warn","isNativelyInitialized","position","__detachAnimation","__attachAnimation","__addChild","__detach","__initialized","__removeChild","stop","__stopImmediately_testOnly","result","backwardsCompatibleAnimWrapper","clock","state","undefined"],"sources":["/Users/fernandorojo/Developer/messing/rea-tree/node_modules/react-native-reanimated/lib/reanimated1/animations/backwardCompatibleAnimWrapper.js"],"sourcesContent":["import { always, block, call, clockRunning, cond, set, startClock, stopClock } from '../base';\nimport Clock from '../core/AnimatedClock';\nimport { evaluateOnce } from '../derived/evaluateOnce';\n\nfunction createOldAnimationObject(node, animationStateDefaults, value, config) {\n  var newClock = new Clock();\n  var currentState = animationStateDefaults();\n  var alwaysNode;\n  var isStarted = false;\n  var isDone = false;\n  var wasStopped = false;\n  var animationCallback;\n  var animation = {\n    start: function start(currentAnimationCallback) {\n      animationCallback = currentAnimationCallback;\n\n      if (isStarted) {\n        animationCallback && animationCallback({\n          finished: false\n        });\n        return;\n      }\n\n      if (isDone) {\n        console.warn('Animation has been finished before'); // inconsistent with React Native\n\n        return;\n      }\n\n      if (!value.isNativelyInitialized()) {\n        return;\n      }\n\n      isStarted = true;\n      evaluateOnce(set(currentState.position, value), currentState.position, function () {\n        alwaysNode = always(set(value, block([cond(clockRunning(newClock), 0, startClock(newClock)), node(newClock, currentState, config), cond(currentState.finished, [call([], function () {\n          isStarted = false;\n\n          if (!wasStopped) {\n            isDone = true;\n          }\n\n          value.__detachAnimation(animation);\n\n          isDone = true;\n\n          if (!wasStopped) {\n            wasStopped = false;\n          }\n        }), stopClock(newClock)]), currentState.position])));\n\n        value.__attachAnimation(animation);\n\n        alwaysNode.__addChild(value);\n      });\n    },\n    __detach: function __detach() {\n      animationCallback && animationCallback({\n        finished: isDone\n      });\n      animationCallback = null;\n      value.__initialized && alwaysNode.__removeChild(value);\n    },\n    stop: function stop() {\n      if (isDone) {\n        console.warn('Calling stop has no effect as the animation has already completed');\n        return;\n      }\n\n      if (!isStarted) {\n        console.warn(\"Calling stop has no effect as the animation hasn't been started\");\n        return;\n      }\n\n      wasStopped = true;\n      evaluateOnce(set(currentState.finished, 1), currentState.finished);\n    },\n    __stopImmediately_testOnly: function __stopImmediately_testOnly(result) {\n      animation.stop();\n      isDone = result;\n\n      value.__detachAnimation(animation);\n    }\n  };\n  return animation;\n}\n/**\n * Depending on the arguments list we either return animation node or return an\n * animation object that is compatible with the original Animated API\n */\n\n\nexport default function backwardsCompatibleAnimWrapper(node, animationStateDefaults) {\n  return function (clock, state, config) {\n    if (config !== undefined) {\n      return node(clock, state, config);\n    }\n\n    return createOldAnimationObject(node, animationStateDefaults, clock, state);\n  };\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}