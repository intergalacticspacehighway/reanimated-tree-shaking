{"ast":null,"code":"import _defineProperty from\"/Users/fernandorojo/Developer/messing/rea-tree/node_modules/next/dist/compiled/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"/Users/fernandorojo/Developer/messing/rea-tree/node_modules/next/dist/compiled/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/fernandorojo/Developer/messing/rea-tree/node_modules/next/dist/compiled/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/fernandorojo/Developer/messing/rea-tree/node_modules/next/dist/compiled/@babel/runtime/helpers/esm/inherits\";import _possibleConstructorReturn from\"/Users/fernandorojo/Developer/messing/rea-tree/node_modules/next/dist/compiled/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/fernandorojo/Developer/messing/rea-tree/node_modules/next/dist/compiled/@babel/runtime/helpers/esm/getPrototypeOf\";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly){symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;});}keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(Object(source),true).forEach(function(key){_defineProperty(target,key,source[key]);});}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source));}else{ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}}return target;}function _createForOfIteratorHelper(o,allowArrayLike){var it=typeof Symbol!==\"undefined\"&&o[Symbol.iterator]||o[\"@@iterator\"];if(!it){if(Array.isArray(o)||(it=_unsupportedIterableToArray(o))||allowArrayLike&&o&&typeof o.length===\"number\"){if(it)o=it;var i=0;var F=function F(){};return{s:F,n:function n(){if(i>=o.length)return{done:true};return{done:false,value:o[i++]};},e:function e(_e){throw _e;},f:F};}throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");}var normalCompletion=true,didErr=false,err;return{s:function s(){it=it.call(o);},n:function n(){var step=it.next();normalCompletion=step.done;return step;},e:function e(_e2){didErr=true;err=_e2;},f:function f(){try{if(!normalCompletion&&it[\"return\"]!=null)it[\"return\"]();}finally{if(didErr)throw err;}}};}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o===\"string\")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n===\"Object\"&&o.constructor)n=o.constructor.name;if(n===\"Map\"||n===\"Set\")return Array.from(o);if(n===\"Arguments\"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen);}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i];}return arr2;}function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return _possibleConstructorReturn(this,result);};}function _isNativeReflectConstruct(){if(typeof Reflect===\"undefined\"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy===\"function\")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}import React from'react';import findNodeHandle from\"react-native-web/dist/cjs/exports/findNodeHandle\";import Platform from\"react-native-web/dist/cjs/exports/Platform\";import StyleSheet from\"react-native-web/dist/cjs/exports/StyleSheet\";import ReanimatedEventEmitter from'./ReanimatedEventEmitter';// @ts-ignore JS file\nimport AnimatedEvent from'./reanimated1/core/AnimatedEvent';// @ts-ignore JS file\nimport AnimatedNode from'./reanimated1/core/AnimatedNode';// @ts-ignore JS file\nimport AnimatedValue from'./reanimated1/core/AnimatedValue';// @ts-ignore JS file\nimport{createOrReusePropsNode}from'./reanimated1/core/AnimatedProps';import WorkletEventHandler from'./reanimated2/WorkletEventHandler';import setAndForwardRef from'./setAndForwardRef';import'./reanimated2/layoutReanimation/LayoutAnimationRepository';import invariant from'invariant';import{adaptViewConfig}from'./ConfigHelper';import{RNRenderer}from'./reanimated2/platform-specific/RNRenderer';import{makeMutable,runOnUI,enableLayoutAnimations}from'./reanimated2/core';import{DefaultEntering,DefaultExiting,DefaultLayout}from'./reanimated2/layoutReanimation/defaultAnimations/Default';import{isJest,isChromeDebugger,shouldBeUseWeb}from'./reanimated2/PlatformChecker';import{initialUpdaterRun}from'./reanimated2/animation';import{jsx as _jsx}from\"react/jsx-runtime\";var NODE_MAPPING=new Map();function listener(data){var component=NODE_MAPPING.get(data.viewTag);component&&component._updateFromNative(data.props);}function dummyListener(){// empty listener we use to assign to listener properties for which animated\n// event is used.\n}function hasAnimatedNodes(value){if(value instanceof AnimatedNode){return true;}if(Array.isArray(value)){return value.some(function(item){return hasAnimatedNodes(item);});}if(value&&typeof value==='object'){return Object.keys(value).some(function(key){return hasAnimatedNodes(value[key]);});}return false;}function flattenArray(array){if(!Array.isArray(array)){return[array];}var resultArr=[];var _flattenArray=function _flattenArray(arr){arr.forEach(function(item){if(Array.isArray(item)){_flattenArray(item);}else{resultArr.push(item);}});};_flattenArray(array);return resultArr;}function onlyAnimatedStyles(styles){return styles.filter(function(style){return style===null||style===void 0?void 0:style.viewDescriptors;});}function isSameAnimatedStyle(style1,style2){// We cannot use equality check to compare useAnimatedStyle outputs directly.\n// Instead, we can compare its viewsRefs.\nreturn(style1===null||style1===void 0?void 0:style1.viewsRef)===(style2===null||style2===void 0?void 0:style2.viewsRef);}var isSameAnimatedProps=isSameAnimatedStyle;var has=function has(key,x){if(typeof x==='function'||typeof x==='object'){if(x===null||x===undefined){return false;}else{return key in x;}}return false;};export default function createAnimatedComponent(Component,options){invariant(typeof Component!=='function'||Component.prototype&&Component.prototype.isReactComponent,'`createAnimatedComponent` does not support stateless functional components; '+'use a class component instead.');var AnimatedComponent=/*#__PURE__*/function(_React$Component){_inherits(AnimatedComponent,_React$Component);var _super=_createSuper(AnimatedComponent);function AnimatedComponent(props){var _this;_classCallCheck(this,AnimatedComponent);_this=_super.call(this,props);_this._invokeAnimatedPropsCallbackOnMount=false;_this._styles=null;_this._viewTag=-1;_this._isFirstRender=true;_this.animatedStyle={value:{}};_this.initialStyle={};_this._component=null;// The system is best designed when setNativeProps is implemented. It is\n// able to avoid re-rendering and directly set the attributes that changed.\n// However, setNativeProps can only be implemented on native components\n// If you want to animate a composite component, you need to re-render it.\n// In this case, we have a fallback that uses forceUpdate.\n_this._animatedPropsCallback=function(){if(_this._component==null){// AnimatedProps is created in will-mount because it's used in render.\n// But this callback may be invoked before mount in async mode,\n// In which case we should defer the setNativeProps() call.\n// React may throw away uncommitted work in async mode,\n// So a deferred call won't always be invoked.\n_this._invokeAnimatedPropsCallbackOnMount=true;}else if(typeof _this._component.setNativeProps!=='function'){_this.forceUpdate();}else{// eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n_this._component.setNativeProps(_this._propsAnimated.__getValue());}};_this._setComponentRef=setAndForwardRef({getForwardedRef:function getForwardedRef(){return _this.props.forwardedRef;},setLocalRef:function setLocalRef(ref){// TODO update config\nvar tag=findNodeHandle(ref);if((_this.props.layout||_this.props.entering||_this.props.exiting)&&tag!=null){if(!shouldBeUseWeb()){enableLayoutAnimations(true,false);}var layout=_this.props.layout?_this.props.layout:DefaultLayout;var entering=_this.props.entering?_this.props.entering:DefaultEntering;var exiting=_this.props.exiting?_this.props.exiting:DefaultExiting;if(has('build',layout)){layout=layout.build();}if(has('build',entering)){entering=entering.build();}if(has('build',exiting)){exiting=exiting.build();}var config={layout:layout,entering:entering,exiting:exiting,sv:_this.sv};runOnUI(function(){var _f=function _f(){global.LayoutAnimationRepository.registerConfig(tag,config);};_f._closure={tag:tag,config:config};_f.asString=\"function _f(){const{tag,config}=jsThis._closure;{global.LayoutAnimationRepository.registerConfig(tag,config);}}\";_f.__workletHash=5455589887771;_f.__location=\"/Users/fernandorojo/Developer/messing/rea-tree/node_modules/react-native-reanimated/lib/createAnimatedComponent.js (149:32)\";return _f;}())();}if(ref!==_this._component){_this._component=ref;}}});_this._attachProps(_this.props);if(isJest()){_this.animatedStyle={value:{}};}_this.sv=makeMutable({});return _this;}_createClass(AnimatedComponent,[{key:\"componentWillUnmount\",value:function componentWillUnmount(){this._detachPropUpdater();this._propsAnimated&&this._propsAnimated.__detach();this._detachNativeEvents();this._detachStyles();this.sv=null;}},{key:\"componentDidMount\",value:function componentDidMount(){if(this._invokeAnimatedPropsCallbackOnMount){this._invokeAnimatedPropsCallbackOnMount=false;this._animatedPropsCallback();}this._propsAnimated&&// eslint-disable-next-line @typescript-eslint/no-non-null-assertion\nthis._propsAnimated.setNativeView(this._component);this._attachNativeEvents();this._attachPropUpdater();this._attachAnimatedStyles();}},{key:\"_getEventViewRef\",value:function _getEventViewRef(){var _a;// Make sure to get the scrollable node for components that implement\n// `ScrollResponder.Mixin`.\nreturn((_a=this._component)===null||_a===void 0?void 0:_a.getScrollableNode)?this._component.getScrollableNode():this._component;}},{key:\"_attachNativeEvents\",value:function _attachNativeEvents(){var node=this._getEventViewRef();var viewTag=findNodeHandle((options===null||options===void 0?void 0:options.setNativeProps)?this:node);for(var key in this.props){var prop=this.props[key];if(prop instanceof AnimatedEvent){prop.attachEvent(node,key);}else if(has('current',prop)&&prop.current instanceof WorkletEventHandler){prop.current.registerForEvents(viewTag,key);}}}},{key:\"_detachNativeEvents\",value:function _detachNativeEvents(){var node=this._getEventViewRef();for(var key in this.props){var prop=this.props[key];if(prop instanceof AnimatedEvent){prop.detachEvent(node,key);}else if(has('current',prop)&&prop.current instanceof WorkletEventHandler){prop.current.unregisterFromEvents();}}}},{key:\"_detachStyles\",value:function _detachStyles(){var _a;if(Platform.OS==='web'&&this._styles!==null){var _iterator=_createForOfIteratorHelper(this._styles),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var style=_step.value;if(style===null||style===void 0?void 0:style.viewsRef){style.viewsRef.remove(this);}}}catch(err){_iterator.e(err);}finally{_iterator.f();}}else if(this._viewTag!==-1&&this._styles!==null){var _iterator2=_createForOfIteratorHelper(this._styles),_step2;try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var _style=_step2.value;_style.viewDescriptors.remove(this._viewTag);}}catch(err){_iterator2.e(err);}finally{_iterator2.f();}if((_a=this.props.animatedProps)===null||_a===void 0?void 0:_a.viewDescriptors){this.props.animatedProps.viewDescriptors.remove(this._viewTag);}}}},{key:\"_reattachNativeEvents\",value:function _reattachNativeEvents(prevProps){var node=this._getEventViewRef();var attached=new Set();var nextEvts=new Set();var viewTag;for(var key in this.props){var prop=this.props[key];if(prop instanceof AnimatedEvent){nextEvts.add(prop.__nodeID);}else if(has('current',prop)&&prop.current instanceof WorkletEventHandler){if(viewTag===undefined){viewTag=prop.current.viewTag;}}}for(var _key in prevProps){var _prop=this.props[_key];if(_prop instanceof AnimatedEvent){if(!nextEvts.has(_prop.__nodeID)){// event was in prev props but not in current props, we detach\n_prop.detachEvent(node,_key);}else{// event was in prev and is still in current props\nattached.add(_prop.__nodeID);}}else if(has('current',_prop)&&_prop.current instanceof WorkletEventHandler&&_prop.current.reattachNeeded){_prop.current.unregisterFromEvents();}}for(var _key2 in this.props){var _prop2=this.props[_key2];if(_prop2 instanceof AnimatedEvent&&!attached.has(_prop2.__nodeID)){// not yet attached\n_prop2.attachEvent(node,_key2);}else if(has('current',_prop2)&&_prop2.current instanceof WorkletEventHandler&&_prop2.current.reattachNeeded){// eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n_prop2.current.registerForEvents(viewTag,_key2);_prop2.current.reattachNeeded=false;}}}},{key:\"_attachProps\",value:function _attachProps(nextProps){var oldPropsAnimated=this._propsAnimated;this._propsAnimated=createOrReusePropsNode(nextProps,this._animatedPropsCallback,oldPropsAnimated);// If prop node has been reused we don't need to call into \"__detach\"\nif(oldPropsAnimated!==this._propsAnimated){// When you call detach, it removes the element from the parent list\n// of children. If it goes to 0, then the parent also detaches itself\n// and so on.\n// An optimization is to attach the new elements and THEN detach the old\n// ones instead of detaching and THEN attaching.\n// This way the intermediate state isn't to go to 0 and trigger\n// this expensive recursive detaching to then re-attach everything on\n// the very next operation.\noldPropsAnimated&&oldPropsAnimated.__detach();}}},{key:\"_updateFromNative\",value:function _updateFromNative(props){var _a,_b;if(options===null||options===void 0?void 0:options.setNativeProps){// eslint-disable-next-line @typescript-eslint/no-non-null-assertion\noptions.setNativeProps(this._component,props);}else{// eslint-disable-next-line no-unused-expressions\n(_b=(_a=this._component)===null||_a===void 0?void 0:_a.setNativeProps)===null||_b===void 0?void 0:_b.call(_a,props);}}},{key:\"_attachPropUpdater\",value:function _attachPropUpdater(){var viewTag=findNodeHandle(this);NODE_MAPPING.set(viewTag,this);if(NODE_MAPPING.size===1){ReanimatedEventEmitter.addListener('onReanimatedPropsChange',listener);}}},{key:\"_attachAnimatedStyles\",value:function _attachAnimatedStyles(){var _this2=this;var _a,_b,_c;var styles=this.props.style?onlyAnimatedStyles(flattenArray(this.props.style)):[];var prevStyles=this._styles;this._styles=styles;var prevAnimatedProps=this._animatedProps;this._animatedProps=this.props.animatedProps;var viewTag;var viewName;if(Platform.OS==='web'){viewTag=findNodeHandle(this);viewName=null;}else{// hostInstance can be null for a component that doesn't render anything (render function returns null). Example: svg Stop: https://github.com/react-native-svg/react-native-svg/blob/develop/src/elements/Stop.tsx\nvar hostInstance=RNRenderer.findHostInstance_DEPRECATED(this);if(!hostInstance){throw new Error('Cannot find host instance for this component. Maybe it renders nothing?');}// we can access view tag in the same way it's accessed here https://github.com/facebook/react/blob/e3f4eb7272d4ca0ee49f27577156b57eeb07cf73/packages/react-native-renderer/src/ReactFabric.js#L146\nviewTag=hostInstance===null||hostInstance===void 0?void 0:hostInstance._nativeTag;/**\n           * RN uses viewConfig for components for storing different properties of the component(example: https://github.com/facebook/react-native/blob/master/Libraries/Components/ScrollView/ScrollViewViewConfig.js#L16).\n           * The name we're looking for is in the field named uiViewClassName.\n           */viewName=(_a=hostInstance===null||hostInstance===void 0?void 0:hostInstance.viewConfig)===null||_a===void 0?void 0:_a.uiViewClassName;// update UI props whitelist for this view\nvar hasReanimated2Props=((_b=this.props.animatedProps)===null||_b===void 0?void 0:_b.viewDescriptors)||styles.length;if(hasReanimated2Props&&(hostInstance===null||hostInstance===void 0?void 0:hostInstance.viewConfig)){adaptViewConfig(hostInstance.viewConfig);}}this._viewTag=viewTag;// remove old styles\nif(prevStyles){// in most of the cases, views have only a single animated style and it remains unchanged\nvar hasOneSameStyle=styles.length===1&&prevStyles.length===1&&isSameAnimatedStyle(styles[0],prevStyles[0]);if(!hasOneSameStyle){// otherwise, remove each style that is not present in new styles\nvar _iterator3=_createForOfIteratorHelper(prevStyles),_step3;try{var _loop=function _loop(){var prevStyle=_step3.value;var isPresent=styles.some(function(style){return isSameAnimatedStyle(style,prevStyle);});if(!isPresent){prevStyle.viewDescriptors.remove(viewTag);}};for(_iterator3.s();!(_step3=_iterator3.n()).done;){_loop();}}catch(err){_iterator3.e(err);}finally{_iterator3.f();}}}styles.forEach(function(style){style.viewDescriptors.add({tag:viewTag,name:viewName});if(isJest()){/**\n             * We need to connect Jest's TestObject instance whose contains just props object\n             * with the updateProps() function where we update the properties of the component.\n             * We can't update props object directly because TestObject contains a copy of props - look at render function:\n             * const props = this._filterNonAnimatedProps(this.props);\n             */_this2.animatedStyle.value=Object.assign(Object.assign({},_this2.animatedStyle.value),style.initial.value);style.animatedStyle.current=_this2.animatedStyle;}});// detach old animatedProps\nif(prevAnimatedProps&&!isSameAnimatedProps(prevAnimatedProps,this.props.animatedProps)){prevAnimatedProps.viewDescriptors.remove(viewTag);}// attach animatedProps property\nif((_c=this.props.animatedProps)===null||_c===void 0?void 0:_c.viewDescriptors){this.props.animatedProps.viewDescriptors.add({// eslint-disable-next-line @typescript-eslint/no-non-null-assertion\ntag:viewTag,// eslint-disable-next-line @typescript-eslint/no-non-null-assertion\nname:viewName});}}},{key:\"_detachPropUpdater\",value:function _detachPropUpdater(){var viewTag=findNodeHandle(this);NODE_MAPPING[\"delete\"](viewTag);if(NODE_MAPPING.size===0){ReanimatedEventEmitter.removeAllListeners('onReanimatedPropsChange');}}},{key:\"componentDidUpdate\",value:function componentDidUpdate(prevProps){this._attachProps(this.props);this._reattachNativeEvents(prevProps);this._propsAnimated&&// eslint-disable-next-line @typescript-eslint/no-non-null-assertion\nthis._propsAnimated.setNativeView(this._component);this._attachAnimatedStyles();}},{key:\"_filterNonAnimatedStyle\",value:function _filterNonAnimatedStyle(inputStyle){var style={};for(var key in inputStyle){var value=inputStyle[key];if(!hasAnimatedNodes(value)){style[key]=value;}else if(value instanceof AnimatedValue){// if any style in animated component is set directly to the `Value` we set those styles to the first value of `Value` node in order\n// to avoid flash of default styles when `Value` is being asynchrounously sent via bridge and initialized in the native side.\nstyle[key]=value._startingValue;}}return style;}},{key:\"_filterNonAnimatedProps\",value:function _filterNonAnimatedProps(inputProps){var _this3=this;var props={};var _loop2=function _loop2(key){var value=inputProps[key];if(key==='style'){var styleProp=inputProps.style;var styles=flattenArray(styleProp!==null&&styleProp!==void 0?styleProp:[]);var processedStyle=styles.map(function(style){if(style&&style.viewDescriptors){// this is how we recognize styles returned by useAnimatedStyle\nstyle.viewsRef.add(_this3);if(_this3._isFirstRender){_this3.initialStyle=Object.assign(Object.assign({},style.initial.value),initialUpdaterRun(style.initial.updater));}return _this3.initialStyle;}else{return style;}});props[key]=_this3._filterNonAnimatedStyle(StyleSheet.flatten(processedStyle));}else if(key==='animatedProps'){var animatedProp=inputProps.animatedProps;if(animatedProp.initial!==undefined){Object.keys(animatedProp.initial.value).forEach(function(key){var _a,_b;props[key]=(_a=animatedProp.initial)===null||_a===void 0?void 0:_a.value[key];(_b=animatedProp.viewsRef)===null||_b===void 0?void 0:_b.add(_this3);});}}else if(value instanceof AnimatedEvent){// we cannot filter out event listeners completely as some components\n// rely on having a callback registered in order to generate events\n// alltogether. Therefore we provide a dummy callback here to allow\n// native event dispatcher to hijack events.\nprops[key]=dummyListener;}else if(has('current',value)&&value.current instanceof WorkletEventHandler){if(value.current.eventNames.length>0){value.current.eventNames.forEach(function(eventName){props[eventName]=has('listeners',value.current)?value.current.listeners[eventName]:dummyListener;});}else{props[key]=dummyListener;}}else if(!(value instanceof AnimatedNode)){if(key!=='onGestureHandlerStateChange'||!isChromeDebugger()){props[key]=value;}}else if(value instanceof AnimatedValue){// if any prop in animated component is set directly to the `Value` we set those props to the first value of `Value` node in order\n// to avoid default values for a short moment when `Value` is being asynchrounously sent via bridge and initialized in the native side.\nprops[key]=value._startingValue;}};for(var key in inputProps){_loop2(key);}return props;}},{key:\"render\",value:function render(){var props=this._filterNonAnimatedProps(this.props);if(isJest()){props.animatedStyle=this.animatedStyle;}if(this._isFirstRender){this._isFirstRender=false;}var platformProps=Platform.select({web:{},\"default\":{collapsable:false}});return/*#__PURE__*/_jsx(Component,_objectSpread(_objectSpread({},props),{},{ref:this._setComponentRef},platformProps));}}]);return AnimatedComponent;}(React.Component);AnimatedComponent.displayName=\"AnimatedComponent(\".concat(Component.displayName||Component.name||'Component',\")\");return/*#__PURE__*/React.forwardRef(function(props,ref){return/*#__PURE__*/_jsx(AnimatedComponent,_objectSpread(_objectSpread({},props),ref===null?null:{forwardedRef:ref}));});}","map":{"version":3,"names":["_defineProperty","_classCallCheck","_createClass","_inherits","_possibleConstructorReturn","_getPrototypeOf","ownKeys","object","enumerableOnly","keys","Object","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","target","i","arguments","length","source","forEach","key","getOwnPropertyDescriptors","defineProperties","defineProperty","_createForOfIteratorHelper","o","allowArrayLike","it","Symbol","iterator","Array","isArray","_unsupportedIterableToArray","F","s","n","done","value","e","_e","f","TypeError","normalCompletion","didErr","err","call","step","next","_e2","minLen","_arrayLikeToArray","prototype","toString","slice","constructor","name","from","test","arr","len","arr2","_createSuper","Derived","hasNativeReflectConstruct","_isNativeReflectConstruct","_createSuperInternal","Super","result","NewTarget","Reflect","construct","sham","Proxy","Boolean","valueOf","React","findNodeHandle","Platform","StyleSheet","ReanimatedEventEmitter","AnimatedEvent","AnimatedNode","AnimatedValue","createOrReusePropsNode","WorkletEventHandler","setAndForwardRef","invariant","adaptViewConfig","RNRenderer","makeMutable","runOnUI","enableLayoutAnimations","DefaultEntering","DefaultExiting","DefaultLayout","isJest","isChromeDebugger","shouldBeUseWeb","initialUpdaterRun","jsx","_jsx","NODE_MAPPING","Map","listener","data","component","get","viewTag","_updateFromNative","props","dummyListener","hasAnimatedNodes","some","item","flattenArray","array","resultArr","_flattenArray","onlyAnimatedStyles","styles","style","viewDescriptors","isSameAnimatedStyle","style1","style2","viewsRef","isSameAnimatedProps","has","x","undefined","createAnimatedComponent","Component","options","isReactComponent","AnimatedComponent","_React$Component","_super","_this","_invokeAnimatedPropsCallbackOnMount","_styles","_viewTag","_isFirstRender","animatedStyle","initialStyle","_component","_animatedPropsCallback","setNativeProps","forceUpdate","_propsAnimated","__getValue","_setComponentRef","getForwardedRef","forwardedRef","setLocalRef","ref","tag","layout","entering","exiting","build","config","sv","_f","global","LayoutAnimationRepository","registerConfig","_closure","asString","__workletHash","__location","_attachProps","componentWillUnmount","_detachPropUpdater","__detach","_detachNativeEvents","_detachStyles","componentDidMount","setNativeView","_attachNativeEvents","_attachPropUpdater","_attachAnimatedStyles","_getEventViewRef","_a","getScrollableNode","node","prop","attachEvent","current","registerForEvents","detachEvent","unregisterFromEvents","OS","_iterator","_step","remove","_iterator2","_step2","_style","animatedProps","_reattachNativeEvents","prevProps","attached","Set","nextEvts","add","__nodeID","_key","_prop","reattachNeeded","_key2","_prop2","nextProps","oldPropsAnimated","_b","set","size","addListener","_this2","_c","prevStyles","prevAnimatedProps","_animatedProps","viewName","hostInstance","findHostInstance_DEPRECATED","Error","_nativeTag","viewConfig","uiViewClassName","hasReanimated2Props","hasOneSameStyle","_iterator3","_step3","_loop","prevStyle","isPresent","assign","initial","removeAllListeners","componentDidUpdate","_filterNonAnimatedStyle","inputStyle","_startingValue","_filterNonAnimatedProps","inputProps","_this3","_loop2","styleProp","processedStyle","map","updater","flatten","animatedProp","eventNames","eventName","listeners","render","platformProps","select","web","collapsable","displayName","concat","forwardRef"],"sources":["/Users/fernandorojo/Developer/messing/rea-tree/node_modules/react-native-reanimated/lib/createAnimatedComponent.js"],"sourcesContent":["import _defineProperty from \"/Users/fernandorojo/Developer/messing/rea-tree/node_modules/next/dist/compiled/@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"/Users/fernandorojo/Developer/messing/rea-tree/node_modules/next/dist/compiled/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/fernandorojo/Developer/messing/rea-tree/node_modules/next/dist/compiled/@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"/Users/fernandorojo/Developer/messing/rea-tree/node_modules/next/dist/compiled/@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"/Users/fernandorojo/Developer/messing/rea-tree/node_modules/next/dist/compiled/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/fernandorojo/Developer/messing/rea-tree/node_modules/next/dist/compiled/@babel/runtime/helpers/esm/getPrototypeOf\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it[\"return\"] != null) it[\"return\"](); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React from 'react';\nimport findNodeHandle from \"react-native-web/dist/cjs/exports/findNodeHandle\";\nimport Platform from \"react-native-web/dist/cjs/exports/Platform\";\nimport StyleSheet from \"react-native-web/dist/cjs/exports/StyleSheet\";\nimport ReanimatedEventEmitter from './ReanimatedEventEmitter'; // @ts-ignore JS file\n\nimport AnimatedEvent from './reanimated1/core/AnimatedEvent'; // @ts-ignore JS file\n\nimport AnimatedNode from './reanimated1/core/AnimatedNode'; // @ts-ignore JS file\n\nimport AnimatedValue from './reanimated1/core/AnimatedValue'; // @ts-ignore JS file\n\nimport { createOrReusePropsNode } from './reanimated1/core/AnimatedProps';\nimport WorkletEventHandler from './reanimated2/WorkletEventHandler';\nimport setAndForwardRef from './setAndForwardRef';\nimport './reanimated2/layoutReanimation/LayoutAnimationRepository';\nimport invariant from 'invariant';\nimport { adaptViewConfig } from './ConfigHelper';\nimport { RNRenderer } from './reanimated2/platform-specific/RNRenderer';\nimport { makeMutable, runOnUI, enableLayoutAnimations } from './reanimated2/core';\nimport { DefaultEntering, DefaultExiting, DefaultLayout } from './reanimated2/layoutReanimation/defaultAnimations/Default';\nimport { isJest, isChromeDebugger, shouldBeUseWeb } from './reanimated2/PlatformChecker';\nimport { initialUpdaterRun } from './reanimated2/animation';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nvar NODE_MAPPING = new Map();\n\nfunction listener(data) {\n  var component = NODE_MAPPING.get(data.viewTag);\n  component && component._updateFromNative(data.props);\n}\n\nfunction dummyListener() {// empty listener we use to assign to listener properties for which animated\n  // event is used.\n}\n\nfunction hasAnimatedNodes(value) {\n  if (value instanceof AnimatedNode) {\n    return true;\n  }\n\n  if (Array.isArray(value)) {\n    return value.some(function (item) {\n      return hasAnimatedNodes(item);\n    });\n  }\n\n  if (value && typeof value === 'object') {\n    return Object.keys(value).some(function (key) {\n      return hasAnimatedNodes(value[key]);\n    });\n  }\n\n  return false;\n}\n\nfunction flattenArray(array) {\n  if (!Array.isArray(array)) {\n    return [array];\n  }\n\n  var resultArr = [];\n\n  var _flattenArray = function _flattenArray(arr) {\n    arr.forEach(function (item) {\n      if (Array.isArray(item)) {\n        _flattenArray(item);\n      } else {\n        resultArr.push(item);\n      }\n    });\n  };\n\n  _flattenArray(array);\n\n  return resultArr;\n}\n\nfunction onlyAnimatedStyles(styles) {\n  return styles.filter(function (style) {\n    return style === null || style === void 0 ? void 0 : style.viewDescriptors;\n  });\n}\n\nfunction isSameAnimatedStyle(style1, style2) {\n  // We cannot use equality check to compare useAnimatedStyle outputs directly.\n  // Instead, we can compare its viewsRefs.\n  return (style1 === null || style1 === void 0 ? void 0 : style1.viewsRef) === (style2 === null || style2 === void 0 ? void 0 : style2.viewsRef);\n}\n\nvar isSameAnimatedProps = isSameAnimatedStyle;\n\nvar has = function has(key, x) {\n  if (typeof x === 'function' || typeof x === 'object') {\n    if (x === null || x === undefined) {\n      return false;\n    } else {\n      return key in x;\n    }\n  }\n\n  return false;\n};\n\nexport default function createAnimatedComponent(Component, options) {\n  invariant(typeof Component !== 'function' || Component.prototype && Component.prototype.isReactComponent, '`createAnimatedComponent` does not support stateless functional components; ' + 'use a class component instead.');\n\n  var AnimatedComponent = /*#__PURE__*/function (_React$Component) {\n    _inherits(AnimatedComponent, _React$Component);\n\n    var _super = _createSuper(AnimatedComponent);\n\n    function AnimatedComponent(props) {\n      var _this;\n\n      _classCallCheck(this, AnimatedComponent);\n\n      _this = _super.call(this, props);\n      _this._invokeAnimatedPropsCallbackOnMount = false;\n      _this._styles = null;\n      _this._viewTag = -1;\n      _this._isFirstRender = true;\n      _this.animatedStyle = {\n        value: {}\n      };\n      _this.initialStyle = {};\n      _this._component = null; // The system is best designed when setNativeProps is implemented. It is\n      // able to avoid re-rendering and directly set the attributes that changed.\n      // However, setNativeProps can only be implemented on native components\n      // If you want to animate a composite component, you need to re-render it.\n      // In this case, we have a fallback that uses forceUpdate.\n\n      _this._animatedPropsCallback = function () {\n        if (_this._component == null) {\n          // AnimatedProps is created in will-mount because it's used in render.\n          // But this callback may be invoked before mount in async mode,\n          // In which case we should defer the setNativeProps() call.\n          // React may throw away uncommitted work in async mode,\n          // So a deferred call won't always be invoked.\n          _this._invokeAnimatedPropsCallbackOnMount = true;\n        } else if (typeof _this._component.setNativeProps !== 'function') {\n          _this.forceUpdate();\n        } else {\n          // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n          _this._component.setNativeProps(_this._propsAnimated.__getValue());\n        }\n      };\n\n      _this._setComponentRef = setAndForwardRef({\n        getForwardedRef: function getForwardedRef() {\n          return _this.props.forwardedRef;\n        },\n        setLocalRef: function setLocalRef(ref) {\n          // TODO update config\n          var tag = findNodeHandle(ref);\n\n          if ((_this.props.layout || _this.props.entering || _this.props.exiting) && tag != null) {\n            if (!shouldBeUseWeb()) {\n              enableLayoutAnimations(true, false);\n            }\n\n            var layout = _this.props.layout ? _this.props.layout : DefaultLayout;\n            var entering = _this.props.entering ? _this.props.entering : DefaultEntering;\n            var exiting = _this.props.exiting ? _this.props.exiting : DefaultExiting;\n\n            if (has('build', layout)) {\n              layout = layout.build();\n            }\n\n            if (has('build', entering)) {\n              entering = entering.build();\n            }\n\n            if (has('build', exiting)) {\n              exiting = exiting.build();\n            }\n\n            var config = {\n              layout: layout,\n              entering: entering,\n              exiting: exiting,\n              sv: _this.sv\n            };\n            runOnUI(function () {\n              var _f = function _f() {\n                global.LayoutAnimationRepository.registerConfig(tag, config);\n              };\n\n              _f._closure = {\n                tag: tag,\n                config: config\n              };\n              _f.asString = \"function _f(){const{tag,config}=jsThis._closure;{global.LayoutAnimationRepository.registerConfig(tag,config);}}\";\n              _f.__workletHash = 5455589887771;\n              _f.__location = \"/Users/fernandorojo/Developer/messing/rea-tree/node_modules/react-native-reanimated/lib/createAnimatedComponent.js (149:32)\";\n              return _f;\n            }())();\n          }\n\n          if (ref !== _this._component) {\n            _this._component = ref;\n          }\n        }\n      });\n\n      _this._attachProps(_this.props);\n\n      if (isJest()) {\n        _this.animatedStyle = {\n          value: {}\n        };\n      }\n\n      _this.sv = makeMutable({});\n      return _this;\n    }\n\n    _createClass(AnimatedComponent, [{\n      key: \"componentWillUnmount\",\n      value: function componentWillUnmount() {\n        this._detachPropUpdater();\n\n        this._propsAnimated && this._propsAnimated.__detach();\n\n        this._detachNativeEvents();\n\n        this._detachStyles();\n\n        this.sv = null;\n      }\n    }, {\n      key: \"componentDidMount\",\n      value: function componentDidMount() {\n        if (this._invokeAnimatedPropsCallbackOnMount) {\n          this._invokeAnimatedPropsCallbackOnMount = false;\n\n          this._animatedPropsCallback();\n        }\n\n        this._propsAnimated && // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n        this._propsAnimated.setNativeView(this._component);\n\n        this._attachNativeEvents();\n\n        this._attachPropUpdater();\n\n        this._attachAnimatedStyles();\n      }\n    }, {\n      key: \"_getEventViewRef\",\n      value: function _getEventViewRef() {\n        var _a; // Make sure to get the scrollable node for components that implement\n        // `ScrollResponder.Mixin`.\n\n\n        return ((_a = this._component) === null || _a === void 0 ? void 0 : _a.getScrollableNode) ? this._component.getScrollableNode() : this._component;\n      }\n    }, {\n      key: \"_attachNativeEvents\",\n      value: function _attachNativeEvents() {\n        var node = this._getEventViewRef();\n\n        var viewTag = findNodeHandle((options === null || options === void 0 ? void 0 : options.setNativeProps) ? this : node);\n\n        for (var key in this.props) {\n          var prop = this.props[key];\n\n          if (prop instanceof AnimatedEvent) {\n            prop.attachEvent(node, key);\n          } else if (has('current', prop) && prop.current instanceof WorkletEventHandler) {\n            prop.current.registerForEvents(viewTag, key);\n          }\n        }\n      }\n    }, {\n      key: \"_detachNativeEvents\",\n      value: function _detachNativeEvents() {\n        var node = this._getEventViewRef();\n\n        for (var key in this.props) {\n          var prop = this.props[key];\n\n          if (prop instanceof AnimatedEvent) {\n            prop.detachEvent(node, key);\n          } else if (has('current', prop) && prop.current instanceof WorkletEventHandler) {\n            prop.current.unregisterFromEvents();\n          }\n        }\n      }\n    }, {\n      key: \"_detachStyles\",\n      value: function _detachStyles() {\n        var _a;\n\n        if (Platform.OS === 'web' && this._styles !== null) {\n          var _iterator = _createForOfIteratorHelper(this._styles),\n              _step;\n\n          try {\n            for (_iterator.s(); !(_step = _iterator.n()).done;) {\n              var style = _step.value;\n\n              if (style === null || style === void 0 ? void 0 : style.viewsRef) {\n                style.viewsRef.remove(this);\n              }\n            }\n          } catch (err) {\n            _iterator.e(err);\n          } finally {\n            _iterator.f();\n          }\n        } else if (this._viewTag !== -1 && this._styles !== null) {\n          var _iterator2 = _createForOfIteratorHelper(this._styles),\n              _step2;\n\n          try {\n            for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n              var _style = _step2.value;\n\n              _style.viewDescriptors.remove(this._viewTag);\n            }\n          } catch (err) {\n            _iterator2.e(err);\n          } finally {\n            _iterator2.f();\n          }\n\n          if ((_a = this.props.animatedProps) === null || _a === void 0 ? void 0 : _a.viewDescriptors) {\n            this.props.animatedProps.viewDescriptors.remove(this._viewTag);\n          }\n        }\n      }\n    }, {\n      key: \"_reattachNativeEvents\",\n      value: function _reattachNativeEvents(prevProps) {\n        var node = this._getEventViewRef();\n\n        var attached = new Set();\n        var nextEvts = new Set();\n        var viewTag;\n\n        for (var key in this.props) {\n          var prop = this.props[key];\n\n          if (prop instanceof AnimatedEvent) {\n            nextEvts.add(prop.__nodeID);\n          } else if (has('current', prop) && prop.current instanceof WorkletEventHandler) {\n            if (viewTag === undefined) {\n              viewTag = prop.current.viewTag;\n            }\n          }\n        }\n\n        for (var _key in prevProps) {\n          var _prop = this.props[_key];\n\n          if (_prop instanceof AnimatedEvent) {\n            if (!nextEvts.has(_prop.__nodeID)) {\n              // event was in prev props but not in current props, we detach\n              _prop.detachEvent(node, _key);\n            } else {\n              // event was in prev and is still in current props\n              attached.add(_prop.__nodeID);\n            }\n          } else if (has('current', _prop) && _prop.current instanceof WorkletEventHandler && _prop.current.reattachNeeded) {\n            _prop.current.unregisterFromEvents();\n          }\n        }\n\n        for (var _key2 in this.props) {\n          var _prop2 = this.props[_key2];\n\n          if (_prop2 instanceof AnimatedEvent && !attached.has(_prop2.__nodeID)) {\n            // not yet attached\n            _prop2.attachEvent(node, _key2);\n          } else if (has('current', _prop2) && _prop2.current instanceof WorkletEventHandler && _prop2.current.reattachNeeded) {\n            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n            _prop2.current.registerForEvents(viewTag, _key2);\n\n            _prop2.current.reattachNeeded = false;\n          }\n        }\n      }\n    }, {\n      key: \"_attachProps\",\n      value: function _attachProps(nextProps) {\n        var oldPropsAnimated = this._propsAnimated;\n        this._propsAnimated = createOrReusePropsNode(nextProps, this._animatedPropsCallback, oldPropsAnimated); // If prop node has been reused we don't need to call into \"__detach\"\n\n        if (oldPropsAnimated !== this._propsAnimated) {\n          // When you call detach, it removes the element from the parent list\n          // of children. If it goes to 0, then the parent also detaches itself\n          // and so on.\n          // An optimization is to attach the new elements and THEN detach the old\n          // ones instead of detaching and THEN attaching.\n          // This way the intermediate state isn't to go to 0 and trigger\n          // this expensive recursive detaching to then re-attach everything on\n          // the very next operation.\n          oldPropsAnimated && oldPropsAnimated.__detach();\n        }\n      }\n    }, {\n      key: \"_updateFromNative\",\n      value: function _updateFromNative(props) {\n        var _a, _b;\n\n        if (options === null || options === void 0 ? void 0 : options.setNativeProps) {\n          // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n          options.setNativeProps(this._component, props);\n        } else {\n          // eslint-disable-next-line no-unused-expressions\n          (_b = (_a = this._component) === null || _a === void 0 ? void 0 : _a.setNativeProps) === null || _b === void 0 ? void 0 : _b.call(_a, props);\n        }\n      }\n    }, {\n      key: \"_attachPropUpdater\",\n      value: function _attachPropUpdater() {\n        var viewTag = findNodeHandle(this);\n        NODE_MAPPING.set(viewTag, this);\n\n        if (NODE_MAPPING.size === 1) {\n          ReanimatedEventEmitter.addListener('onReanimatedPropsChange', listener);\n        }\n      }\n    }, {\n      key: \"_attachAnimatedStyles\",\n      value: function _attachAnimatedStyles() {\n        var _this2 = this;\n\n        var _a, _b, _c;\n\n        var styles = this.props.style ? onlyAnimatedStyles(flattenArray(this.props.style)) : [];\n        var prevStyles = this._styles;\n        this._styles = styles;\n        var prevAnimatedProps = this._animatedProps;\n        this._animatedProps = this.props.animatedProps;\n        var viewTag;\n        var viewName;\n\n        if (Platform.OS === 'web') {\n          viewTag = findNodeHandle(this);\n          viewName = null;\n        } else {\n          // hostInstance can be null for a component that doesn't render anything (render function returns null). Example: svg Stop: https://github.com/react-native-svg/react-native-svg/blob/develop/src/elements/Stop.tsx\n          var hostInstance = RNRenderer.findHostInstance_DEPRECATED(this);\n\n          if (!hostInstance) {\n            throw new Error('Cannot find host instance for this component. Maybe it renders nothing?');\n          } // we can access view tag in the same way it's accessed here https://github.com/facebook/react/blob/e3f4eb7272d4ca0ee49f27577156b57eeb07cf73/packages/react-native-renderer/src/ReactFabric.js#L146\n\n\n          viewTag = hostInstance === null || hostInstance === void 0 ? void 0 : hostInstance._nativeTag;\n          /**\n           * RN uses viewConfig for components for storing different properties of the component(example: https://github.com/facebook/react-native/blob/master/Libraries/Components/ScrollView/ScrollViewViewConfig.js#L16).\n           * The name we're looking for is in the field named uiViewClassName.\n           */\n\n          viewName = (_a = hostInstance === null || hostInstance === void 0 ? void 0 : hostInstance.viewConfig) === null || _a === void 0 ? void 0 : _a.uiViewClassName; // update UI props whitelist for this view\n\n          var hasReanimated2Props = ((_b = this.props.animatedProps) === null || _b === void 0 ? void 0 : _b.viewDescriptors) || styles.length;\n\n          if (hasReanimated2Props && (hostInstance === null || hostInstance === void 0 ? void 0 : hostInstance.viewConfig)) {\n            adaptViewConfig(hostInstance.viewConfig);\n          }\n        }\n\n        this._viewTag = viewTag; // remove old styles\n\n        if (prevStyles) {\n          // in most of the cases, views have only a single animated style and it remains unchanged\n          var hasOneSameStyle = styles.length === 1 && prevStyles.length === 1 && isSameAnimatedStyle(styles[0], prevStyles[0]);\n\n          if (!hasOneSameStyle) {\n            // otherwise, remove each style that is not present in new styles\n            var _iterator3 = _createForOfIteratorHelper(prevStyles),\n                _step3;\n\n            try {\n              var _loop = function _loop() {\n                var prevStyle = _step3.value;\n                var isPresent = styles.some(function (style) {\n                  return isSameAnimatedStyle(style, prevStyle);\n                });\n\n                if (!isPresent) {\n                  prevStyle.viewDescriptors.remove(viewTag);\n                }\n              };\n\n              for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {\n                _loop();\n              }\n            } catch (err) {\n              _iterator3.e(err);\n            } finally {\n              _iterator3.f();\n            }\n          }\n        }\n\n        styles.forEach(function (style) {\n          style.viewDescriptors.add({\n            tag: viewTag,\n            name: viewName\n          });\n\n          if (isJest()) {\n            /**\n             * We need to connect Jest's TestObject instance whose contains just props object\n             * with the updateProps() function where we update the properties of the component.\n             * We can't update props object directly because TestObject contains a copy of props - look at render function:\n             * const props = this._filterNonAnimatedProps(this.props);\n             */\n            _this2.animatedStyle.value = Object.assign(Object.assign({}, _this2.animatedStyle.value), style.initial.value);\n            style.animatedStyle.current = _this2.animatedStyle;\n          }\n        }); // detach old animatedProps\n\n        if (prevAnimatedProps && !isSameAnimatedProps(prevAnimatedProps, this.props.animatedProps)) {\n          prevAnimatedProps.viewDescriptors.remove(viewTag);\n        } // attach animatedProps property\n\n\n        if ((_c = this.props.animatedProps) === null || _c === void 0 ? void 0 : _c.viewDescriptors) {\n          this.props.animatedProps.viewDescriptors.add({\n            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n            tag: viewTag,\n            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n            name: viewName\n          });\n        }\n      }\n    }, {\n      key: \"_detachPropUpdater\",\n      value: function _detachPropUpdater() {\n        var viewTag = findNodeHandle(this);\n        NODE_MAPPING[\"delete\"](viewTag);\n\n        if (NODE_MAPPING.size === 0) {\n          ReanimatedEventEmitter.removeAllListeners('onReanimatedPropsChange');\n        }\n      }\n    }, {\n      key: \"componentDidUpdate\",\n      value: function componentDidUpdate(prevProps) {\n        this._attachProps(this.props);\n\n        this._reattachNativeEvents(prevProps);\n\n        this._propsAnimated && // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n        this._propsAnimated.setNativeView(this._component);\n\n        this._attachAnimatedStyles();\n      }\n    }, {\n      key: \"_filterNonAnimatedStyle\",\n      value: function _filterNonAnimatedStyle(inputStyle) {\n        var style = {};\n\n        for (var key in inputStyle) {\n          var value = inputStyle[key];\n\n          if (!hasAnimatedNodes(value)) {\n            style[key] = value;\n          } else if (value instanceof AnimatedValue) {\n            // if any style in animated component is set directly to the `Value` we set those styles to the first value of `Value` node in order\n            // to avoid flash of default styles when `Value` is being asynchrounously sent via bridge and initialized in the native side.\n            style[key] = value._startingValue;\n          }\n        }\n\n        return style;\n      }\n    }, {\n      key: \"_filterNonAnimatedProps\",\n      value: function _filterNonAnimatedProps(inputProps) {\n        var _this3 = this;\n\n        var props = {};\n\n        var _loop2 = function _loop2(key) {\n          var value = inputProps[key];\n\n          if (key === 'style') {\n            var styleProp = inputProps.style;\n            var styles = flattenArray(styleProp !== null && styleProp !== void 0 ? styleProp : []);\n            var processedStyle = styles.map(function (style) {\n              if (style && style.viewDescriptors) {\n                // this is how we recognize styles returned by useAnimatedStyle\n                style.viewsRef.add(_this3);\n\n                if (_this3._isFirstRender) {\n                  _this3.initialStyle = Object.assign(Object.assign({}, style.initial.value), initialUpdaterRun(style.initial.updater));\n                }\n\n                return _this3.initialStyle;\n              } else {\n                return style;\n              }\n            });\n            props[key] = _this3._filterNonAnimatedStyle(StyleSheet.flatten(processedStyle));\n          } else if (key === 'animatedProps') {\n            var animatedProp = inputProps.animatedProps;\n\n            if (animatedProp.initial !== undefined) {\n              Object.keys(animatedProp.initial.value).forEach(function (key) {\n                var _a, _b;\n\n                props[key] = (_a = animatedProp.initial) === null || _a === void 0 ? void 0 : _a.value[key];\n                (_b = animatedProp.viewsRef) === null || _b === void 0 ? void 0 : _b.add(_this3);\n              });\n            }\n          } else if (value instanceof AnimatedEvent) {\n            // we cannot filter out event listeners completely as some components\n            // rely on having a callback registered in order to generate events\n            // alltogether. Therefore we provide a dummy callback here to allow\n            // native event dispatcher to hijack events.\n            props[key] = dummyListener;\n          } else if (has('current', value) && value.current instanceof WorkletEventHandler) {\n            if (value.current.eventNames.length > 0) {\n              value.current.eventNames.forEach(function (eventName) {\n                props[eventName] = has('listeners', value.current) ? value.current.listeners[eventName] : dummyListener;\n              });\n            } else {\n              props[key] = dummyListener;\n            }\n          } else if (!(value instanceof AnimatedNode)) {\n            if (key !== 'onGestureHandlerStateChange' || !isChromeDebugger()) {\n              props[key] = value;\n            }\n          } else if (value instanceof AnimatedValue) {\n            // if any prop in animated component is set directly to the `Value` we set those props to the first value of `Value` node in order\n            // to avoid default values for a short moment when `Value` is being asynchrounously sent via bridge and initialized in the native side.\n            props[key] = value._startingValue;\n          }\n        };\n\n        for (var key in inputProps) {\n          _loop2(key);\n        }\n\n        return props;\n      }\n    }, {\n      key: \"render\",\n      value: function render() {\n        var props = this._filterNonAnimatedProps(this.props);\n\n        if (isJest()) {\n          props.animatedStyle = this.animatedStyle;\n        }\n\n        if (this._isFirstRender) {\n          this._isFirstRender = false;\n        }\n\n        var platformProps = Platform.select({\n          web: {},\n          \"default\": {\n            collapsable: false\n          }\n        });\n        return /*#__PURE__*/_jsx(Component, _objectSpread(_objectSpread({}, props), {}, {\n          ref: this._setComponentRef\n        }, platformProps));\n      }\n    }]);\n\n    return AnimatedComponent;\n  }(React.Component);\n\n  AnimatedComponent.displayName = \"AnimatedComponent(\".concat(Component.displayName || Component.name || 'Component', \")\");\n  return /*#__PURE__*/React.forwardRef(function (props, ref) {\n    return /*#__PURE__*/_jsx(AnimatedComponent, _objectSpread(_objectSpread({}, props), ref === null ? null : {\n      forwardedRef: ref\n    }));\n  });\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}