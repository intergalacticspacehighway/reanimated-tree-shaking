{"ast":null,"code":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:true});exports.getAllowBackup=getAllowBackup;exports.getAllowBackupFromManifest=getAllowBackupFromManifest;exports.setAllowBackup=setAllowBackup;exports.withAllowBackup=void 0;function _androidPlugins(){var data=require(\"../plugins/android-plugins\");_androidPlugins=function _androidPlugins(){return data;};return data;}function _Manifest(){var data=require(\"./Manifest\");_Manifest=function _Manifest(){return data;};return data;}var withAllowBackup=(0,_androidPlugins().createAndroidManifestPlugin)(setAllowBackup,'withAllowBackup');exports.withAllowBackup=withAllowBackup;function getAllowBackup(config){var _config$android$allow,_config$android;// Defaults to true.\n// https://docs.expo.dev/versions/latest/config/app/#allowbackup\nreturn(_config$android$allow=(_config$android=config.android)===null||_config$android===void 0?void 0:_config$android.allowBackup)!==null&&_config$android$allow!==void 0?_config$android$allow:true;}function setAllowBackup(config,androidManifest){var allowBackup=getAllowBackup(config);var mainApplication=(0,_Manifest().getMainApplication)(androidManifest);if(mainApplication!==null&&mainApplication!==void 0&&mainApplication.$){mainApplication.$['android:allowBackup']=String(allowBackup);}return androidManifest;}function getAllowBackupFromManifest(androidManifest){var mainApplication=(0,_Manifest().getMainApplication)(androidManifest);if(mainApplication!==null&&mainApplication!==void 0&&mainApplication.$){return String(mainApplication.$['android:allowBackup'])==='true';}return null;}","map":{"version":3,"sources":["../../src/android/AllowBackup.ts"],"names":["withAllowBackup","config","allowBackup","getAllowBackup","mainApplication","String"],"mappings":"+OAEA,QAAA,CAAA,eAAA,EAAA,CAAA,GAAA,CAAA,IAAA,CAAA,OAAA,CAAA,4BAAA,CAAA,CAAA,eAAA,CAAA,0BAAA,CAAA,MAAA,CAAA,IAAA,CAAA,CAAA,CAAA,MAAA,CAAA,IAAA,CAAA,CACA,QAAA,CAAA,SAAA,EAAA,CAAA,GAAA,CAAA,IAAA,CAAA,OAAA,CAAA,YAAA,CAAA,CAAA,SAAA,CAAA,oBAAA,CAAA,MAAA,CAAA,IAAA,CAAA,CAAA,CAAA,MAAA,CAAA,IAAA,CAAA,CAEO,GAAMA,CAAAA,eAAe,CAAG,CAAA,EAAA,eAAA,GAAA,2BAAA,EAAA,cAAA,CAAxB,iBAAwB,CAAxB,C,wCAEA,QAAA,CAAA,cAAA,CAAA,MAAA,CAA6D,CAAA,GAAA,CAAA,qBAAA,CAAA,eAAA,CAClE;AACA;AACA,MAAA,CAAA,qBAAA,CAAA,CAAA,eAAA,CAAOC,MAAM,CAAb,OAAA,IAAA,IAAA,EAAA,eAAA,GAAA,IAAA,EAAA,CAAA,IAAA,EAAA,CAAOA,eAAAA,CAAP,WAAA,IAAA,IAAA,EAAA,qBAAA,GAAA,IAAA,EAAA,CAAA,qBAAA,CAAA,IAAA,CACD,CAEM,QAAA,CAAA,cAAA,CAAA,MAAA,CAAA,eAAA,CAGL,CACA,GAAMC,CAAAA,WAAW,CAAGC,cAAc,CAAlC,MAAkC,CAAlC,CAEA,GAAMC,CAAAA,eAAe,CAAG,CAAA,EAAA,SAAA,GAAA,kBAAA,EAAxB,eAAwB,CAAxB,CACA,GAAIA,eAAJ,GAAA,IAAIA,EAAAA,eAAJ,GAAA,IAAA,EAAIA,EAAAA,eAAe,CAAnB,CAAA,CAAwB,CACtBA,eAAe,CAAfA,CAAAA,CAAAA,qBAAAA,EAA2CC,MAAM,CAAjDD,WAAiD,CAAjDA,CACD,CAED,MAAA,CAAA,eAAA,CACD,CAEM,QAAA,CAAA,0BAAA,CAAA,eAAA,CAAsF,CAC3F,GAAMA,CAAAA,eAAe,CAAG,CAAA,EAAA,SAAA,GAAA,kBAAA,EAAxB,eAAwB,CAAxB,CAEA,GAAIA,eAAJ,GAAA,IAAIA,EAAAA,eAAJ,GAAA,IAAA,EAAIA,EAAAA,eAAe,CAAnB,CAAA,CAAwB,CACtB,MAAOC,CAAAA,MAAM,CAACD,eAAe,CAAfA,CAAAA,CAAPC,qBAAOD,CAAD,CAANC,GAAP,MAAA,CACD,CAED,MAAA,KAAA,CACD","sourcesContent":["import { ExpoConfig } from '@expo/config-types';\n\nimport { createAndroidManifestPlugin } from '../plugins/android-plugins';\nimport { AndroidManifest, getMainApplication, StringBoolean } from './Manifest';\n\nexport const withAllowBackup = createAndroidManifestPlugin(setAllowBackup, 'withAllowBackup');\n\nexport function getAllowBackup(config: Pick<ExpoConfig, 'android'>) {\n  // Defaults to true.\n  // https://docs.expo.dev/versions/latest/config/app/#allowbackup\n  return config.android?.allowBackup ?? true;\n}\n\nexport function setAllowBackup(\n  config: Pick<ExpoConfig, 'android'>,\n  androidManifest: AndroidManifest\n) {\n  const allowBackup = getAllowBackup(config);\n\n  const mainApplication = getMainApplication(androidManifest);\n  if (mainApplication?.$) {\n    mainApplication.$['android:allowBackup'] = String(allowBackup) as StringBoolean;\n  }\n\n  return androidManifest;\n}\n\nexport function getAllowBackupFromManifest(androidManifest: AndroidManifest): boolean | null {\n  const mainApplication = getMainApplication(androidManifest);\n\n  if (mainApplication?.$) {\n    return String(mainApplication.$['android:allowBackup']) === 'true';\n  }\n\n  return null;\n}\n"]},"metadata":{},"sourceType":"script"}