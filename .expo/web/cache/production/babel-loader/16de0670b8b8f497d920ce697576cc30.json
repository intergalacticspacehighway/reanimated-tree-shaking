{"ast":null,"code":"import _classCallCheck from\"/Users/fernandorojo/Developer/messing/rea-tree/node_modules/next/dist/compiled/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/fernandorojo/Developer/messing/rea-tree/node_modules/next/dist/compiled/@babel/runtime/helpers/esm/createClass\";import NativeReanimatedModule from'./NativeReanimated';function jsListener(eventName,handler){return function(evt){handler(Object.assign(Object.assign({},evt.nativeEvent),{eventName:eventName}));};}var WorkletEventHandler=/*#__PURE__*/function(){function WorkletEventHandler(worklet){var eventNames=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[];_classCallCheck(this,WorkletEventHandler);this.worklet=worklet;this.eventNames=eventNames;this.reattachNeeded=false;this.listeners={};this.viewTag=undefined;this.registrations=[];if(!NativeReanimatedModule[\"native\"]){this.listeners=eventNames.reduce(function(acc,eventName){acc[eventName]=jsListener(eventName,worklet);return acc;},{});}}_createClass(WorkletEventHandler,[{key:\"updateWorklet\",value:function updateWorklet(newWorklet){this.worklet=newWorklet;this.reattachNeeded=true;}},{key:\"registerForEvents\",value:function registerForEvents(viewTag,fallbackEventName){var _this=this;this.viewTag=viewTag;this.registrations=this.eventNames.map(function(eventName){return NativeReanimatedModule.registerEventHandler(viewTag+eventName,_this.worklet);});if(this.registrations.length===0&&fallbackEventName){this.registrations.push(NativeReanimatedModule.registerEventHandler(viewTag+fallbackEventName,this.worklet));}}},{key:\"unregisterFromEvents\",value:function unregisterFromEvents(){this.registrations.forEach(function(id){return NativeReanimatedModule.unregisterEventHandler(id);});this.registrations=[];}}]);return WorkletEventHandler;}();export{WorkletEventHandler as default};","map":{"version":3,"names":["_classCallCheck","_createClass","NativeReanimatedModule","jsListener","eventName","handler","evt","Object","assign","nativeEvent","WorkletEventHandler","worklet","eventNames","arguments","length","undefined","reattachNeeded","listeners","viewTag","registrations","reduce","acc","key","value","updateWorklet","newWorklet","registerForEvents","fallbackEventName","_this","map","registerEventHandler","push","unregisterFromEvents","forEach","id","unregisterEventHandler","default"],"sources":["/Users/fernandorojo/Developer/messing/rea-tree/node_modules/react-native-reanimated/lib/reanimated2/WorkletEventHandler.js"],"sourcesContent":["import _classCallCheck from \"/Users/fernandorojo/Developer/messing/rea-tree/node_modules/next/dist/compiled/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/fernandorojo/Developer/messing/rea-tree/node_modules/next/dist/compiled/@babel/runtime/helpers/esm/createClass\";\nimport NativeReanimatedModule from './NativeReanimated';\n\nfunction jsListener(eventName, handler) {\n  return function (evt) {\n    handler(Object.assign(Object.assign({}, evt.nativeEvent), {\n      eventName: eventName\n    }));\n  };\n}\n\nvar WorkletEventHandler = /*#__PURE__*/function () {\n  function WorkletEventHandler(worklet) {\n    var eventNames = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n\n    _classCallCheck(this, WorkletEventHandler);\n\n    this.worklet = worklet;\n    this.eventNames = eventNames;\n    this.reattachNeeded = false;\n    this.listeners = {};\n    this.viewTag = undefined;\n    this.registrations = [];\n\n    if (!NativeReanimatedModule[\"native\"]) {\n      this.listeners = eventNames.reduce(function (acc, eventName) {\n        acc[eventName] = jsListener(eventName, worklet);\n        return acc;\n      }, {});\n    }\n  }\n\n  _createClass(WorkletEventHandler, [{\n    key: \"updateWorklet\",\n    value: function updateWorklet(newWorklet) {\n      this.worklet = newWorklet;\n      this.reattachNeeded = true;\n    }\n  }, {\n    key: \"registerForEvents\",\n    value: function registerForEvents(viewTag, fallbackEventName) {\n      var _this = this;\n\n      this.viewTag = viewTag;\n      this.registrations = this.eventNames.map(function (eventName) {\n        return NativeReanimatedModule.registerEventHandler(viewTag + eventName, _this.worklet);\n      });\n\n      if (this.registrations.length === 0 && fallbackEventName) {\n        this.registrations.push(NativeReanimatedModule.registerEventHandler(viewTag + fallbackEventName, this.worklet));\n      }\n    }\n  }, {\n    key: \"unregisterFromEvents\",\n    value: function unregisterFromEvents() {\n      this.registrations.forEach(function (id) {\n        return NativeReanimatedModule.unregisterEventHandler(id);\n      });\n      this.registrations = [];\n    }\n  }]);\n\n  return WorkletEventHandler;\n}();\n\nexport { WorkletEventHandler as default };"],"mappings":"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"},"metadata":{},"sourceType":"module"}