{"ast":null,"code":"\"use strict\";/* eslint-disable */ /* (The MIT License)\n\nCopyright (c) 2010-2017 Nathan Rajlich <nathan@tootallnate.net>\n\nPermission is hereby granted, free of charge, to any person\nobtaining a copy of this software and associated documentation\nfiles (the \"Software\"), to deal in the Software without\nrestriction, including without limitation the rights to use,\ncopy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the\nSoftware is furnished to do so, subject to the following\nconditions:\n\nThe above copyright notice and this permission notice shall be\nincluded in all copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\nEXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES\nOF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\nNONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\nHOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,\nWHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\nFROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR\nOTHER DEALINGS IN THE SOFTWARE. */var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{\"default\":mod};};Object.defineProperty(exports,\"__esModule\",{value:true});exports.build=void 0;var base64_js_1=__importDefault(require(\"base64-js\"));var xmlbuilder_1=__importDefault(require(\"xmlbuilder\"));/**\n * Accepts a `Date` instance and returns an ISO date string.\n *\n * @param {Date} d - Date instance to serialize\n * @returns {String} ISO date string representation of `d`\n * @api private\n */function ISODateString(d){function pad(n){return n<10?'0'+n:n;}return d.getUTCFullYear()+'-'+pad(d.getUTCMonth()+1)+'-'+pad(d.getUTCDate())+'T'+pad(d.getUTCHours())+':'+pad(d.getUTCMinutes())+':'+pad(d.getUTCSeconds())+'Z';}/**\n * Returns the internal \"type\" of `obj` via the\n * `Object.prototype.toString()` trick.\n *\n * @param {Mixed} obj - any value\n * @returns {String} the internal \"type\" name\n * @api private\n */var toString=Object.prototype.toString;function type(obj){var m=toString.call(obj).match(/\\[object (.*)\\]/);return m?m[1]:m;}/**\n * Generate an XML plist string from the input object `obj`.\n *\n * @param {Object} obj - the object to convert\n * @param {Object} [opts] - optional options object\n * @returns {String} converted plist XML string\n * @api public\n */function build(obj,opts){var XMLHDR={version:'1.0',encoding:'UTF-8'};var XMLDTD={pubid:'-//Apple//DTD PLIST 1.0//EN',sysid:'http://www.apple.com/DTDs/PropertyList-1.0.dtd'};var doc=xmlbuilder_1[\"default\"].create('plist');doc.dec(XMLHDR.version,XMLHDR.encoding,XMLHDR.standalone);doc.dtd(XMLDTD.pubid,XMLDTD.sysid);doc.att('version','1.0');walk_obj(obj,doc);if(!opts)opts={};// default `pretty` to `true`\nopts.pretty=opts.pretty!==false;return doc.end(opts);}exports.build=build;/**\n * depth first, recursive traversal of a javascript object. when complete,\n * next_child contains a reference to the build XML object.\n *\n * @api private\n */function walk_obj(next,next_child){var tag_type,i,prop;var name=type(next);if(name=='Undefined'){}else if(Array.isArray(next)){next_child=next_child.ele('array');for(i=0;i<next.length;i++){walk_obj(next[i],next_child);}}else if(Buffer.isBuffer(next)){next_child.ele('data').raw(next.toString('base64'));}else if(name=='Object'){next_child=next_child.ele('dict');for(prop in next){if(next.hasOwnProperty(prop)&&next[prop]!==undefined){next_child.ele('key').txt(prop);walk_obj(next[prop],next_child);}}}else if(name=='Number'){// detect if this is an integer or real\n// TODO: add an ability to force one way or another via a \"cast\"\ntag_type=next%1===0?'integer':'real';next_child.ele(tag_type).txt(next.toString());}else if(name=='Date'){next_child.ele('date').txt(ISODateString(new Date(next)));}else if(name=='Boolean'){next_child.ele(next?'true':'false');}else if(name=='String'){next_child.ele('string').txt(next);}else if(name=='ArrayBuffer'){next_child.ele('data').raw(base64_js_1[\"default\"].fromByteArray(next));}else if(next&&next.buffer&&type(next.buffer)=='ArrayBuffer'){// a typed array\nnext_child.ele('data').raw(base64_js_1[\"default\"].fromByteArray(new Uint8Array(next.buffer)));}}","map":{"version":3,"sources":["../src/build.ts"],"names":[],"mappings":"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","sourcesContent":["/* eslint-disable */\n/* (The MIT License)\n\nCopyright (c) 2010-2017 Nathan Rajlich <nathan@tootallnate.net>\n\nPermission is hereby granted, free of charge, to any person\nobtaining a copy of this software and associated documentation\nfiles (the \"Software\"), to deal in the Software without\nrestriction, including without limitation the rights to use,\ncopy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the\nSoftware is furnished to do so, subject to the following\nconditions:\n\nThe above copyright notice and this permission notice shall be\nincluded in all copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\nEXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES\nOF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\nNONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\nHOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,\nWHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\nFROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR\nOTHER DEALINGS IN THE SOFTWARE. */\n\nimport base64 from 'base64-js';\nimport xmlbuilder from 'xmlbuilder';\n\n/**\n * Accepts a `Date` instance and returns an ISO date string.\n *\n * @param {Date} d - Date instance to serialize\n * @returns {String} ISO date string representation of `d`\n * @api private\n */\n\nfunction ISODateString(d: Date): string {\n  function pad(n: number) {\n    return n < 10 ? '0' + n : n;\n  }\n  return (\n    d.getUTCFullYear() +\n    '-' +\n    pad(d.getUTCMonth() + 1) +\n    '-' +\n    pad(d.getUTCDate()) +\n    'T' +\n    pad(d.getUTCHours()) +\n    ':' +\n    pad(d.getUTCMinutes()) +\n    ':' +\n    pad(d.getUTCSeconds()) +\n    'Z'\n  );\n}\n\n/**\n * Returns the internal \"type\" of `obj` via the\n * `Object.prototype.toString()` trick.\n *\n * @param {Mixed} obj - any value\n * @returns {String} the internal \"type\" name\n * @api private\n */\n\nconst toString = Object.prototype.toString;\nfunction type(obj: object): string | null {\n  const m = toString.call(obj).match(/\\[object (.*)\\]/);\n  return m ? m[1] : m;\n}\n\n/**\n * Generate an XML plist string from the input object `obj`.\n *\n * @param {Object} obj - the object to convert\n * @param {Object} [opts] - optional options object\n * @returns {String} converted plist XML string\n * @api public\n */\n\nexport function build(obj: any, opts?: { [key: string]: any }): string {\n  const XMLHDR = {\n    version: '1.0',\n    encoding: 'UTF-8',\n  } as { version: string; encoding: string; standalone: boolean };\n\n  const XMLDTD = {\n    pubid: '-//Apple//DTD PLIST 1.0//EN',\n    sysid: 'http://www.apple.com/DTDs/PropertyList-1.0.dtd',\n  };\n\n  const doc = xmlbuilder.create('plist');\n\n  doc.dec(XMLHDR.version, XMLHDR.encoding, XMLHDR.standalone);\n  doc.dtd(XMLDTD.pubid, XMLDTD.sysid);\n  doc.att('version', '1.0');\n\n  walk_obj(obj, doc);\n\n  if (!opts) opts = {};\n  // default `pretty` to `true`\n  opts.pretty = opts.pretty !== false;\n  return doc.end(opts);\n}\n\n/**\n * depth first, recursive traversal of a javascript object. when complete,\n * next_child contains a reference to the build XML object.\n *\n * @api private\n */\n\nfunction walk_obj(next: any, next_child: any): void {\n  let tag_type, i, prop;\n  const name = type(next);\n\n  if (name == 'Undefined') {\n  } else if (Array.isArray(next)) {\n    next_child = next_child.ele('array');\n    for (i = 0; i < next.length; i++) {\n      walk_obj(next[i], next_child);\n    }\n  } else if (Buffer.isBuffer(next)) {\n    next_child.ele('data').raw(next.toString('base64'));\n  } else if (name == 'Object') {\n    next_child = next_child.ele('dict');\n    for (prop in next) {\n      if (next.hasOwnProperty(prop) && next[prop] !== undefined) {\n        next_child.ele('key').txt(prop);\n        walk_obj(next[prop], next_child);\n      }\n    }\n  } else if (name == 'Number') {\n    // detect if this is an integer or real\n    // TODO: add an ability to force one way or another via a \"cast\"\n    tag_type = next % 1 === 0 ? 'integer' : 'real';\n    next_child.ele(tag_type).txt(next.toString());\n  } else if (name == 'Date') {\n    next_child.ele('date').txt(ISODateString(new Date(next)));\n  } else if (name == 'Boolean') {\n    next_child.ele(next ? 'true' : 'false');\n  } else if (name == 'String') {\n    next_child.ele('string').txt(next);\n  } else if (name == 'ArrayBuffer') {\n    next_child.ele('data').raw(base64.fromByteArray(next));\n  } else if (next && next.buffer && type(next.buffer) == 'ArrayBuffer') {\n    // a typed array\n    next_child.ele('data').raw(base64.fromByteArray(new Uint8Array(next.buffer)));\n  }\n}\n"],"sourceRoot":""},"metadata":{},"sourceType":"script"}