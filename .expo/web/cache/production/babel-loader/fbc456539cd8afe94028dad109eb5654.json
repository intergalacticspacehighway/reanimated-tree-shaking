{"ast":null,"code":"import{cond,sub,divide,multiply,sqrt,add,block,set,exp,sin,cos,eq,or,neq,and,lessThan,greaterThan,proc,min,abs}from'../base';import AnimatedValue from'../core/InternalAnimatedValue';var MAX_STEPS_MS=64;function spring(clock,state,config){var lastTime=cond(state.time,state.time,clock);var deltaTime=min(sub(clock,lastTime),MAX_STEPS_MS);var c=config.damping;var m=config.mass;var k=config.stiffness;var v0=multiply(-1,state.velocity);var x0=sub(config.toValue,state.position);var zeta=divide(c,multiply(2,sqrt(multiply(k,m))));var omega0=sqrt(divide(k,m));var omega1=multiply(omega0,sqrt(sub(1,multiply(zeta,zeta))));var t=divide(deltaTime,1000);var sin1=sin(multiply(omega1,t));var cos1=cos(multiply(omega1,t));var underDampedEnvelope=exp(multiply(-1,zeta,omega0,t));var underDampedFrag1=multiply(underDampedEnvelope,add(multiply(sin1,divide(add(v0,multiply(zeta,omega0,x0)),omega1)),multiply(x0,cos1)));var underDampedPosition=sub(config.toValue,underDampedFrag1);var underDampedVelocity=sub(multiply(zeta,omega0,underDampedFrag1),multiply(underDampedEnvelope,sub(multiply(cos1,add(v0,multiply(zeta,omega0,x0))),multiply(omega1,x0,sin1))));var criticallyDampedEnvelope=exp(multiply(-1,omega0,t));var criticallyDampedPosition=sub(config.toValue,multiply(criticallyDampedEnvelope,add(x0,multiply(add(v0,multiply(omega0,x0)),t))));var criticallyDampedVelocity=multiply(criticallyDampedEnvelope,add(multiply(v0,sub(multiply(t,omega0),1)),multiply(t,x0,omega0,omega0)));var prevPosition=state.prevPosition?state.prevPosition:new AnimatedValue(0);var isOvershooting=cond(and(config.overshootClamping,neq(config.stiffness,0)),cond(lessThan(prevPosition,config.toValue),greaterThan(state.position,config.toValue),lessThan(state.position,config.toValue)));var isVelocity=lessThan(abs(state.velocity),config.restSpeedThreshold);var isDisplacement=or(eq(config.stiffness,0),lessThan(abs(sub(config.toValue,state.position)),config.restDisplacementThreshold));return block([set(prevPosition,state.position),cond(lessThan(zeta,1),[set(state.position,underDampedPosition),set(state.velocity,underDampedVelocity)],[set(state.position,criticallyDampedPosition),set(state.velocity,criticallyDampedVelocity)]),set(state.time,clock),cond(or(isOvershooting,and(isVelocity,isDisplacement)),[cond(neq(config.stiffness,0),[set(state.velocity,0),set(state.position,config.toValue)]),set(state.finished,1)])]);}var procSpring=proc(function(finished,velocity,position,time,prevPosition,toValue,damping,mass,stiffness,overshootClamping,restSpeedThreshold,restDisplacementThreshold,clock){return spring(clock,{finished:finished,velocity:velocity,position:position,time:time,prevPosition:prevPosition},{toValue:toValue,damping:damping,mass:mass,stiffness:stiffness,overshootClamping:overshootClamping,restDisplacementThreshold:restDisplacementThreshold,restSpeedThreshold:restSpeedThreshold});});export default function springAnimation(clock,_ref,_ref2){var finished=_ref.finished,velocity=_ref.velocity,position=_ref.position,time=_ref.time,prevPosition=_ref.prevPosition;var toValue=_ref2.toValue,damping=_ref2.damping,mass=_ref2.mass,stiffness=_ref2.stiffness,overshootClamping=_ref2.overshootClamping,restDisplacementThreshold=_ref2.restDisplacementThreshold,restSpeedThreshold=_ref2.restSpeedThreshold;return procSpring(finished,velocity,position,time,prevPosition,toValue,damping,mass,stiffness,overshootClamping,restSpeedThreshold,restDisplacementThreshold,clock);}","map":{"version":3,"names":["cond","sub","divide","multiply","sqrt","add","block","set","exp","sin","cos","eq","or","neq","and","lessThan","greaterThan","proc","min","abs","AnimatedValue","MAX_STEPS_MS","spring","clock","state","config","lastTime","time","deltaTime","c","damping","m","mass","k","stiffness","v0","velocity","x0","toValue","position","zeta","omega0","omega1","t","sin1","cos1","underDampedEnvelope","underDampedFrag1","underDampedPosition","underDampedVelocity","criticallyDampedEnvelope","criticallyDampedPosition","criticallyDampedVelocity","prevPosition","isOvershooting","overshootClamping","isVelocity","restSpeedThreshold","isDisplacement","restDisplacementThreshold","finished","procSpring","springAnimation","_ref","_ref2"],"sources":["/Users/fernandorojo/Developer/messing/rea-tree/node_modules/react-native-reanimated/lib/reanimated1/animations/spring.js"],"sourcesContent":["import{cond,sub,divide,multiply,sqrt,add,block,set,exp,sin,cos,eq,or,neq,and,lessThan,greaterThan,proc,min,abs}from'../base';import AnimatedValue from'../core/InternalAnimatedValue';var MAX_STEPS_MS=64;function spring(clock,state,config){var lastTime=cond(state.time,state.time,clock);var deltaTime=min(sub(clock,lastTime),MAX_STEPS_MS);var c=config.damping;var m=config.mass;var k=config.stiffness;var v0=multiply(-1,state.velocity);var x0=sub(config.toValue,state.position);var zeta=divide(c,multiply(2,sqrt(multiply(k,m))));var omega0=sqrt(divide(k,m));var omega1=multiply(omega0,sqrt(sub(1,multiply(zeta,zeta))));var t=divide(deltaTime,1000);var sin1=sin(multiply(omega1,t));var cos1=cos(multiply(omega1,t));var underDampedEnvelope=exp(multiply(-1,zeta,omega0,t));var underDampedFrag1=multiply(underDampedEnvelope,add(multiply(sin1,divide(add(v0,multiply(zeta,omega0,x0)),omega1)),multiply(x0,cos1)));var underDampedPosition=sub(config.toValue,underDampedFrag1);var underDampedVelocity=sub(multiply(zeta,omega0,underDampedFrag1),multiply(underDampedEnvelope,sub(multiply(cos1,add(v0,multiply(zeta,omega0,x0))),multiply(omega1,x0,sin1))));var criticallyDampedEnvelope=exp(multiply(-1,omega0,t));var criticallyDampedPosition=sub(config.toValue,multiply(criticallyDampedEnvelope,add(x0,multiply(add(v0,multiply(omega0,x0)),t))));var criticallyDampedVelocity=multiply(criticallyDampedEnvelope,add(multiply(v0,sub(multiply(t,omega0),1)),multiply(t,x0,omega0,omega0)));var prevPosition=state.prevPosition?state.prevPosition:new AnimatedValue(0);var isOvershooting=cond(and(config.overshootClamping,neq(config.stiffness,0)),cond(lessThan(prevPosition,config.toValue),greaterThan(state.position,config.toValue),lessThan(state.position,config.toValue)));var isVelocity=lessThan(abs(state.velocity),config.restSpeedThreshold);var isDisplacement=or(eq(config.stiffness,0),lessThan(abs(sub(config.toValue,state.position)),config.restDisplacementThreshold));return block([set(prevPosition,state.position),cond(lessThan(zeta,1),[set(state.position,underDampedPosition),set(state.velocity,underDampedVelocity)],[set(state.position,criticallyDampedPosition),set(state.velocity,criticallyDampedVelocity)]),set(state.time,clock),cond(or(isOvershooting,and(isVelocity,isDisplacement)),[cond(neq(config.stiffness,0),[set(state.velocity,0),set(state.position,config.toValue)]),set(state.finished,1)])]);}var procSpring=proc(function(finished,velocity,position,time,prevPosition,toValue,damping,mass,stiffness,overshootClamping,restSpeedThreshold,restDisplacementThreshold,clock){return spring(clock,{finished:finished,velocity:velocity,position:position,time:time,prevPosition:prevPosition},{toValue:toValue,damping:damping,mass:mass,stiffness:stiffness,overshootClamping:overshootClamping,restDisplacementThreshold:restDisplacementThreshold,restSpeedThreshold:restSpeedThreshold});});export default function springAnimation(clock,_ref,_ref2){var finished=_ref.finished,velocity=_ref.velocity,position=_ref.position,time=_ref.time,prevPosition=_ref.prevPosition;var toValue=_ref2.toValue,damping=_ref2.damping,mass=_ref2.mass,stiffness=_ref2.stiffness,overshootClamping=_ref2.overshootClamping,restDisplacementThreshold=_ref2.restDisplacementThreshold,restSpeedThreshold=_ref2.restSpeedThreshold;return procSpring(finished,velocity,position,time,prevPosition,toValue,damping,mass,stiffness,overshootClamping,restSpeedThreshold,restDisplacementThreshold,clock);}"],"mappings":"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"},"metadata":{},"sourceType":"module"}